2024-12-13 02:34:55,712 - mcard.application.card_provisioning_app - DEBUG - Logging system initialized.
2024-12-13 02:34:55,876 - mcard.application.card_provisioning_app - DEBUG - CardProvisioningApp initialized with store and hashing service.
2024-12-13 02:36:37,070 - mcard.application.card_provisioning_app - DEBUG - Logging system initialized.
2024-12-13 02:36:37,282 - mcard.application.card_provisioning_app - DEBUG - CardProvisioningApp initialized with store and hashing service.
2024-12-13 02:37:39,410 - mcard.application.card_provisioning_app - DEBUG - Logging system initialized.
2024-12-13 02:37:39,410 - mcard.application.card_provisioning_app - DEBUG - Logging system initialized.
2024-12-13 02:37:39,594 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:37:39,594 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:37:39,595 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Initializing SQLite database at ./data/ROOT_mcard_DOT_ENV_UPDATED.db
2024-12-13 02:37:39,595 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x1150dd8a0>
2024-12-13 02:37:39,595 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x1150dd8a0> completed
2024-12-13 02:37:39,596 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x11503f790>, 'PRAGMA journal_mode=WAL', [])
2024-12-13 02:37:39,596 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x11503f790>, 'PRAGMA journal_mode=WAL', []) completed
2024-12-13 02:37:39,596 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x11503f790>, 'PRAGMA synchronous=NORMAL', [])
2024-12-13 02:37:39,596 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x11503f790>, 'PRAGMA synchronous=NORMAL', []) completed
2024-12-13 02:37:39,596 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x11503f790>, 'PRAGMA foreign_keys=ON', [])
2024-12-13 02:37:39,596 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x11503f790>, 'PRAGMA foreign_keys=ON', []) completed
2024-12-13 02:37:39,596 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x11503f790>, 'PRAGMA busy_timeout=30.0', [])
2024-12-13 02:37:39,596 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x11503f790>, 'PRAGMA busy_timeout=30.0', []) completed
2024-12-13 02:37:39,596 - mcard.infrastructure.persistence.schema - DEBUG - Starting SQLite schema initialization for tables: ['card']
2024-12-13 02:37:39,596 - mcard.infrastructure.persistence.schema - DEBUG - Processing table: card
2024-12-13 02:37:39,596 - mcard.infrastructure.persistence.schema - DEBUG - Table creation SQL: CREATE TABLE IF NOT EXISTS card (
id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
hash TEXT NOT NULL UNIQUE,
content TEXT NOT NULL,
g_time TEXT NOT NULL,
metadata TEXT
)
2024-12-13 02:37:39,596 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x11503f790>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', [])
2024-12-13 02:37:39,596 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x11503f790>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', []) completed
2024-12-13 02:37:39,597 - mcard.infrastructure.persistence.schema - INFO - Initialized table card in SQLite database
2024-12-13 02:37:39,597 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)
2024-12-13 02:37:39,597 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x11503f790>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', [])
2024-12-13 02:37:39,597 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x11503f790>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', []) completed
2024-12-13 02:37:39,597 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_g_time
2024-12-13 02:37:39,597 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)
2024-12-13 02:37:39,597 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x11503f790>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', [])
2024-12-13 02:37:39,597 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x11503f790>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', []) completed
2024-12-13 02:37:39,597 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_hash
2024-12-13 02:37:39,597 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x11503f790>)
2024-12-13 02:37:39,597 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x11503f790>) completed
2024-12-13 02:37:39,597 - mcard.infrastructure.persistence.schema - INFO - SQLite schema initialization completed successfully
2024-12-13 02:37:39,597 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x11503f790>)
2024-12-13 02:37:39,597 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x11503f790>) completed
2024-12-13 02:37:39,597 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x1150ddb20>
2024-12-13 02:37:39,597 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x1150ddb20> completed
2024-12-13 02:37:39,597 - mcard.infrastructure.persistence.schema - DEBUG - Starting SQLite schema initialization for tables: ['card']
2024-12-13 02:37:39,597 - mcard.infrastructure.persistence.schema - DEBUG - Processing table: card
2024-12-13 02:37:39,597 - mcard.infrastructure.persistence.schema - DEBUG - Table creation SQL: CREATE TABLE IF NOT EXISTS card (
id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
hash TEXT NOT NULL UNIQUE,
content TEXT NOT NULL,
g_time TEXT NOT NULL,
metadata TEXT
)
2024-12-13 02:37:39,597 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x1153047c0>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', [])
2024-12-13 02:37:39,598 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x1153047c0>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', []) completed
2024-12-13 02:37:39,598 - mcard.infrastructure.persistence.schema - INFO - Initialized table card in SQLite database
2024-12-13 02:37:39,598 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)
2024-12-13 02:37:39,598 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x1153047c0>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', [])
2024-12-13 02:37:39,598 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x1153047c0>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', []) completed
2024-12-13 02:37:39,598 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_g_time
2024-12-13 02:37:39,598 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)
2024-12-13 02:37:39,598 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x1153047c0>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', [])
2024-12-13 02:37:39,598 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x1153047c0>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', []) completed
2024-12-13 02:37:39,598 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_hash
2024-12-13 02:37:39,598 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x1153047c0>)
2024-12-13 02:37:39,598 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x1153047c0>) completed
2024-12-13 02:37:39,598 - mcard.infrastructure.persistence.schema - INFO - SQLite schema initialization completed successfully
2024-12-13 02:37:39,598 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1153047c0>)
2024-12-13 02:37:39,598 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1153047c0>) completed
2024-12-13 02:37:39,598 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x114cf6340>, 'DELETE FROM card', [])
2024-12-13 02:37:39,599 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x114cf6340>, 'DELETE FROM card', []) completed
2024-12-13 02:37:39,599 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x1153047c0>)
2024-12-13 02:37:39,599 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x1153047c0>) completed
2024-12-13 02:37:39,600 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x1153047c0>)
2024-12-13 02:37:39,600 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x1153047c0>) completed
2024-12-13 02:37:39,600 - mcard.application.card_provisioning_app - DEBUG - CardProvisioningApp initialized with store and hashing service.
2024-12-13 02:37:39,600 - mcard.application.card_provisioning_app - DEBUG - CardProvisioningApp initialized with store and hashing service.
2024-12-13 02:37:39,600 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11503f790>)
2024-12-13 02:37:39,600 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11503f790>) completed
2024-12-13 02:37:39,600 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x114cf7c40>, 'DELETE FROM card', [])
2024-12-13 02:37:39,600 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x114cf7c40>, 'DELETE FROM card', []) completed
2024-12-13 02:37:39,600 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x11503f790>)
2024-12-13 02:37:39,600 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x11503f790>) completed
2024-12-13 02:37:39,601 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x114cf7c40>)
2024-12-13 02:37:39,601 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x114cf7c40>) completed
2024-12-13 02:37:39,601 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 1 - 2024-12-13T02:37:39.601294
2024-12-13 02:37:39,601 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11503f790>)
2024-12-13 02:37:39,601 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11503f790>) completed
2024-12-13 02:37:39,601 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x114cf5240>, 'SELECT content, g_time FROM card WHERE hash = ?', ('70288612e8080c7e54dc4f736dd63d3c',))
2024-12-13 02:37:39,601 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x114cf5240>, 'SELECT content, g_time FROM card WHERE hash = ?', ('70288612e8080c7e54dc4f736dd63d3c',)) completed
2024-12-13 02:37:39,601 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x114cf5240>)
2024-12-13 02:37:39,601 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x114cf5240>) completed
2024-12-13 02:37:39,601 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x114cf5240>)
2024-12-13 02:37:39,601 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x114cf5240>) completed
2024-12-13 02:37:39,601 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: 70288612e8080c7e54dc4f736dd63d3c to database
2024-12-13 02:37:39,602 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11503f790>)
2024-12-13 02:37:39,602 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11503f790>) completed
2024-12-13 02:37:39,602 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x114cf4f40>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('70288612e8080c7e54dc4f736dd63d3c', 'Persistent Test Card 1 - 2024-12-13T02:37:39.601294', '2024-12-12T18:37:39.601724+00:00'))
2024-12-13 02:37:39,602 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x114cf4f40>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('70288612e8080c7e54dc4f736dd63d3c', 'Persistent Test Card 1 - 2024-12-13T02:37:39.601294', '2024-12-12T18:37:39.601724+00:00')) completed
2024-12-13 02:37:39,602 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x11503f790>)
2024-12-13 02:37:39,602 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x11503f790>) completed
2024-12-13 02:37:39,603 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: 70288612e8080c7e54dc4f736dd63d3c to database
2024-12-13 02:37:39,603 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x114cf4f40>)
2024-12-13 02:37:39,603 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x114cf4f40>) completed
2024-12-13 02:37:39,603 - test_mcard_api_persistent - DEBUG - Created card with hash: 70288612e8080c7e54dc4f736dd63d3c
2024-12-13 02:37:39,603 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 2 - 2024-12-13T02:37:39.601298
2024-12-13 02:37:39,603 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11503f790>)
2024-12-13 02:37:39,603 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11503f790>) completed
2024-12-13 02:37:39,603 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x114cf56c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('30c8061ad4b28c8f95ca72feeedf7dea',))
2024-12-13 02:37:39,603 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x114cf56c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('30c8061ad4b28c8f95ca72feeedf7dea',)) completed
2024-12-13 02:37:39,603 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x114cf56c0>)
2024-12-13 02:37:39,603 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x114cf56c0>) completed
2024-12-13 02:37:39,603 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x114cf56c0>)
2024-12-13 02:37:39,603 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x114cf56c0>) completed
2024-12-13 02:37:39,603 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: 30c8061ad4b28c8f95ca72feeedf7dea to database
2024-12-13 02:37:39,603 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11503f790>)
2024-12-13 02:37:39,604 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11503f790>) completed
2024-12-13 02:37:39,604 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x114cf5540>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('30c8061ad4b28c8f95ca72feeedf7dea', 'Persistent Test Card 2 - 2024-12-13T02:37:39.601298', '2024-12-12T18:37:39.603902+00:00'))
2024-12-13 02:37:39,604 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x114cf5540>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('30c8061ad4b28c8f95ca72feeedf7dea', 'Persistent Test Card 2 - 2024-12-13T02:37:39.601298', '2024-12-12T18:37:39.603902+00:00')) completed
2024-12-13 02:37:39,604 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x11503f790>)
2024-12-13 02:37:39,604 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x11503f790>) completed
2024-12-13 02:37:39,604 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: 30c8061ad4b28c8f95ca72feeedf7dea to database
2024-12-13 02:37:39,604 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x114cf5540>)
2024-12-13 02:37:39,604 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x114cf5540>) completed
2024-12-13 02:37:39,604 - test_mcard_api_persistent - DEBUG - Created card with hash: 30c8061ad4b28c8f95ca72feeedf7dea
2024-12-13 02:37:39,604 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 3 - 2024-12-13T02:37:39.601300
2024-12-13 02:37:39,604 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11503f790>)
2024-12-13 02:37:39,604 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11503f790>) completed
2024-12-13 02:37:39,604 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x114cf7740>, 'SELECT content, g_time FROM card WHERE hash = ?', ('8da2cb55e036ba5306daa4f7a689d6d2',))
2024-12-13 02:37:39,604 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x114cf7740>, 'SELECT content, g_time FROM card WHERE hash = ?', ('8da2cb55e036ba5306daa4f7a689d6d2',)) completed
2024-12-13 02:37:39,604 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x114cf7740>)
2024-12-13 02:37:39,604 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x114cf7740>) completed
2024-12-13 02:37:39,604 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x114cf7740>)
2024-12-13 02:37:39,605 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x114cf7740>) completed
2024-12-13 02:37:39,605 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: 8da2cb55e036ba5306daa4f7a689d6d2 to database
2024-12-13 02:37:39,605 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11503f790>)
2024-12-13 02:37:39,605 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11503f790>) completed
2024-12-13 02:37:39,605 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x114cf78c0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('8da2cb55e036ba5306daa4f7a689d6d2', 'Persistent Test Card 3 - 2024-12-13T02:37:39.601300', '2024-12-12T18:37:39.605105+00:00'))
2024-12-13 02:37:39,605 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x114cf78c0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('8da2cb55e036ba5306daa4f7a689d6d2', 'Persistent Test Card 3 - 2024-12-13T02:37:39.601300', '2024-12-12T18:37:39.605105+00:00')) completed
2024-12-13 02:37:39,605 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x11503f790>)
2024-12-13 02:37:39,605 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x11503f790>) completed
2024-12-13 02:37:39,605 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: 8da2cb55e036ba5306daa4f7a689d6d2 to database
2024-12-13 02:37:39,605 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x114cf78c0>)
2024-12-13 02:37:39,605 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x114cf78c0>) completed
2024-12-13 02:37:39,605 - test_mcard_api_persistent - DEBUG - Created card with hash: 8da2cb55e036ba5306daa4f7a689d6d2
2024-12-13 02:37:39,605 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11503f790>)
2024-12-13 02:37:39,605 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11503f790>) completed
2024-12-13 02:37:39,605 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x114cf4240>, 'SELECT content, g_time FROM card WHERE hash = ?', ('70288612e8080c7e54dc4f736dd63d3c',))
2024-12-13 02:37:39,605 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x114cf4240>, 'SELECT content, g_time FROM card WHERE hash = ?', ('70288612e8080c7e54dc4f736dd63d3c',)) completed
2024-12-13 02:37:39,605 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x114cf4240>)
2024-12-13 02:37:39,605 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x114cf4240>) completed
2024-12-13 02:37:39,605 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x114cf4240>)
2024-12-13 02:37:39,605 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x114cf4240>) completed
2024-12-13 02:37:39,605 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: 70288612e8080c7e54dc4f736dd63d3c
2024-12-13 02:37:39,606 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11503f790>)
2024-12-13 02:37:39,606 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11503f790>) completed
2024-12-13 02:37:39,606 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x114cf5140>, 'SELECT content, g_time FROM card WHERE hash = ?', ('30c8061ad4b28c8f95ca72feeedf7dea',))
2024-12-13 02:37:39,606 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x114cf5140>, 'SELECT content, g_time FROM card WHERE hash = ?', ('30c8061ad4b28c8f95ca72feeedf7dea',)) completed
2024-12-13 02:37:39,606 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x114cf5140>)
2024-12-13 02:37:39,606 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x114cf5140>) completed
2024-12-13 02:37:39,606 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x114cf5140>)
2024-12-13 02:37:39,606 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x114cf5140>) completed
2024-12-13 02:37:39,606 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: 30c8061ad4b28c8f95ca72feeedf7dea
2024-12-13 02:37:39,606 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11503f790>)
2024-12-13 02:37:39,606 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11503f790>) completed
2024-12-13 02:37:39,606 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x114cf5bc0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('8da2cb55e036ba5306daa4f7a689d6d2',))
2024-12-13 02:37:39,606 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x114cf5bc0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('8da2cb55e036ba5306daa4f7a689d6d2',)) completed
2024-12-13 02:37:39,606 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x114cf5bc0>)
2024-12-13 02:37:39,606 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x114cf5bc0>) completed
2024-12-13 02:37:39,606 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x114cf5bc0>)
2024-12-13 02:37:39,606 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x114cf5bc0>) completed
2024-12-13 02:37:39,606 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: 8da2cb55e036ba5306daa4f7a689d6d2
2024-12-13 02:37:39,606 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11503f790>)
2024-12-13 02:37:39,606 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11503f790>) completed
2024-12-13 02:37:39,606 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x114cf4c40>, 'SELECT hash, content, g_time FROM card WHERE 1=1 ORDER BY g_time DESC', [])
2024-12-13 02:37:39,606 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x114cf4c40>, 'SELECT hash, content, g_time FROM card WHERE 1=1 ORDER BY g_time DESC', []) completed
2024-12-13 02:37:39,606 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x114cf4c40>)
2024-12-13 02:37:39,606 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x114cf4c40>) completed
2024-12-13 02:37:39,606 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x114cf4c40>)
2024-12-13 02:37:39,607 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x114cf4c40>) completed
2024-12-13 02:37:39,638 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:39:56,701 - mcard.application.card_provisioning_app - DEBUG - Logging system initialized.
2024-12-13 02:39:56,701 - mcard.application.card_provisioning_app - DEBUG - Logging system initialized.
2024-12-13 02:39:56,911 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:39:56,911 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:39:56,912 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Initializing SQLite database at ./data/ROOT_mcard_DOT_ENV_UPDATED.db
2024-12-13 02:39:56,912 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x111ce0720>
2024-12-13 02:39:56,912 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x111ce0720> completed
2024-12-13 02:39:56,912 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x111c47790>, 'PRAGMA journal_mode=WAL', [])
2024-12-13 02:39:56,912 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x111c47790>, 'PRAGMA journal_mode=WAL', []) completed
2024-12-13 02:39:56,912 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x111c47790>, 'PRAGMA synchronous=NORMAL', [])
2024-12-13 02:39:56,913 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x111c47790>, 'PRAGMA synchronous=NORMAL', []) completed
2024-12-13 02:39:56,913 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x111c47790>, 'PRAGMA foreign_keys=ON', [])
2024-12-13 02:39:56,913 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x111c47790>, 'PRAGMA foreign_keys=ON', []) completed
2024-12-13 02:39:56,913 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x111c47790>, 'PRAGMA busy_timeout=30.0', [])
2024-12-13 02:39:56,913 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x111c47790>, 'PRAGMA busy_timeout=30.0', []) completed
2024-12-13 02:39:56,913 - mcard.infrastructure.persistence.schema - DEBUG - Starting SQLite schema initialization for tables: ['card']
2024-12-13 02:39:56,913 - mcard.infrastructure.persistence.schema - DEBUG - Processing table: card
2024-12-13 02:39:56,913 - mcard.infrastructure.persistence.schema - DEBUG - Table creation SQL: CREATE TABLE IF NOT EXISTS card (
id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
hash TEXT NOT NULL UNIQUE,
content TEXT NOT NULL,
g_time TEXT NOT NULL,
metadata TEXT
)
2024-12-13 02:39:56,913 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x111c47790>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', [])
2024-12-13 02:39:56,913 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x111c47790>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', []) completed
2024-12-13 02:39:56,913 - mcard.infrastructure.persistence.schema - INFO - Initialized table card in SQLite database
2024-12-13 02:39:56,913 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)
2024-12-13 02:39:56,913 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x111c47790>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', [])
2024-12-13 02:39:56,913 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x111c47790>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', []) completed
2024-12-13 02:39:56,913 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_g_time
2024-12-13 02:39:56,913 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)
2024-12-13 02:39:56,913 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x111c47790>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', [])
2024-12-13 02:39:56,913 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x111c47790>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', []) completed
2024-12-13 02:39:56,913 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_hash
2024-12-13 02:39:56,913 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x111c47790>)
2024-12-13 02:39:56,913 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x111c47790>) completed
2024-12-13 02:39:56,913 - mcard.infrastructure.persistence.schema - INFO - SQLite schema initialization completed successfully
2024-12-13 02:39:56,914 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x111c47790>)
2024-12-13 02:39:56,914 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x111c47790>) completed
2024-12-13 02:39:56,914 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x111ce1a80>
2024-12-13 02:39:56,914 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x111ce1a80> completed
2024-12-13 02:39:56,914 - mcard.infrastructure.persistence.schema - DEBUG - Starting SQLite schema initialization for tables: ['card']
2024-12-13 02:39:56,914 - mcard.infrastructure.persistence.schema - DEBUG - Processing table: card
2024-12-13 02:39:56,914 - mcard.infrastructure.persistence.schema - DEBUG - Table creation SQL: CREATE TABLE IF NOT EXISTS card (
id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
hash TEXT NOT NULL UNIQUE,
content TEXT NOT NULL,
g_time TEXT NOT NULL,
metadata TEXT
)
2024-12-13 02:39:56,914 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x111d0c7c0>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', [])
2024-12-13 02:39:56,915 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x111d0c7c0>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', []) completed
2024-12-13 02:39:56,915 - mcard.infrastructure.persistence.schema - INFO - Initialized table card in SQLite database
2024-12-13 02:39:56,915 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)
2024-12-13 02:39:56,915 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x111d0c7c0>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', [])
2024-12-13 02:39:56,916 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x111d0c7c0>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', []) completed
2024-12-13 02:39:56,916 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_g_time
2024-12-13 02:39:56,916 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)
2024-12-13 02:39:56,916 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x111d0c7c0>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', [])
2024-12-13 02:39:56,916 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x111d0c7c0>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', []) completed
2024-12-13 02:39:56,916 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_hash
2024-12-13 02:39:56,916 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x111d0c7c0>)
2024-12-13 02:39:56,916 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x111d0c7c0>) completed
2024-12-13 02:39:56,916 - mcard.infrastructure.persistence.schema - INFO - SQLite schema initialization completed successfully
2024-12-13 02:39:56,916 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x111d0c7c0>)
2024-12-13 02:39:56,916 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x111d0c7c0>) completed
2024-12-13 02:39:56,916 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x111767240>, 'DELETE FROM card', [])
2024-12-13 02:39:56,916 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x111767240>, 'DELETE FROM card', []) completed
2024-12-13 02:39:56,917 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x111d0c7c0>)
2024-12-13 02:39:56,917 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x111d0c7c0>) completed
2024-12-13 02:39:56,917 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x111d0c7c0>)
2024-12-13 02:39:56,917 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x111d0c7c0>) completed
2024-12-13 02:39:56,917 - mcard.application.card_provisioning_app - DEBUG - CardProvisioningApp initialized with store and hashing service.
2024-12-13 02:39:56,917 - mcard.application.card_provisioning_app - DEBUG - CardProvisioningApp initialized with store and hashing service.
2024-12-13 02:39:56,917 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x111c47790>)
2024-12-13 02:39:56,917 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x111c47790>) completed
2024-12-13 02:39:56,917 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1119fd640>, 'DELETE FROM card', [])
2024-12-13 02:39:56,918 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1119fd640>, 'DELETE FROM card', []) completed
2024-12-13 02:39:56,918 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x111c47790>)
2024-12-13 02:39:56,918 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x111c47790>) completed
2024-12-13 02:39:56,918 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x1119fd640>)
2024-12-13 02:39:56,918 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x1119fd640>) completed
2024-12-13 02:39:56,918 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 1 - 2024-12-13T02:39:56.918459
2024-12-13 02:39:56,918 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x111c47790>)
2024-12-13 02:39:56,918 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x111c47790>) completed
2024-12-13 02:39:56,918 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1119fe040>, 'SELECT content, g_time FROM card WHERE hash = ?', ('568046dae5b4a07f13d69e5fc707c017',))
2024-12-13 02:39:56,918 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1119fe040>, 'SELECT content, g_time FROM card WHERE hash = ?', ('568046dae5b4a07f13d69e5fc707c017',)) completed
2024-12-13 02:39:56,918 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x1119fe040>)
2024-12-13 02:39:56,918 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x1119fe040>) completed
2024-12-13 02:39:56,918 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x1119fe040>)
2024-12-13 02:39:56,918 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x1119fe040>) completed
2024-12-13 02:39:56,919 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: 568046dae5b4a07f13d69e5fc707c017 to database
2024-12-13 02:39:56,919 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x111c47790>)
2024-12-13 02:39:56,919 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x111c47790>) completed
2024-12-13 02:39:56,919 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1119fc6c0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('568046dae5b4a07f13d69e5fc707c017', 'Persistent Test Card 1 - 2024-12-13T02:39:56.918459', '2024-12-12T18:39:56.918864+00:00'))
2024-12-13 02:39:56,919 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1119fc6c0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('568046dae5b4a07f13d69e5fc707c017', 'Persistent Test Card 1 - 2024-12-13T02:39:56.918459', '2024-12-12T18:39:56.918864+00:00')) completed
2024-12-13 02:39:56,919 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x111c47790>)
2024-12-13 02:39:56,919 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x111c47790>) completed
2024-12-13 02:39:56,919 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: 568046dae5b4a07f13d69e5fc707c017 to database
2024-12-13 02:39:56,919 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x1119fc6c0>)
2024-12-13 02:39:56,919 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x1119fc6c0>) completed
2024-12-13 02:39:56,919 - test_mcard_api_persistent - DEBUG - Created card with hash: 568046dae5b4a07f13d69e5fc707c017
2024-12-13 02:39:56,919 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 2 - 2024-12-13T02:39:56.918464
2024-12-13 02:39:56,919 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x111c47790>)
2024-12-13 02:39:56,919 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x111c47790>) completed
2024-12-13 02:39:56,919 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1119fe0c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('96f712cc5434a432600d419e2b254eca',))
2024-12-13 02:39:56,919 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1119fe0c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('96f712cc5434a432600d419e2b254eca',)) completed
2024-12-13 02:39:56,919 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x1119fe0c0>)
2024-12-13 02:39:56,919 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x1119fe0c0>) completed
2024-12-13 02:39:56,920 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x1119fe0c0>)
2024-12-13 02:39:56,920 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x1119fe0c0>) completed
2024-12-13 02:39:56,920 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: 96f712cc5434a432600d419e2b254eca to database
2024-12-13 02:39:56,920 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x111c47790>)
2024-12-13 02:39:56,920 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x111c47790>) completed
2024-12-13 02:39:56,920 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1119fdfc0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('96f712cc5434a432600d419e2b254eca', 'Persistent Test Card 2 - 2024-12-13T02:39:56.918464', '2024-12-12T18:39:56.920089+00:00'))
2024-12-13 02:39:56,920 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1119fdfc0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('96f712cc5434a432600d419e2b254eca', 'Persistent Test Card 2 - 2024-12-13T02:39:56.918464', '2024-12-12T18:39:56.920089+00:00')) completed
2024-12-13 02:39:56,920 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x111c47790>)
2024-12-13 02:39:56,920 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x111c47790>) completed
2024-12-13 02:39:56,920 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: 96f712cc5434a432600d419e2b254eca to database
2024-12-13 02:39:56,920 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x1119fdfc0>)
2024-12-13 02:39:56,920 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x1119fdfc0>) completed
2024-12-13 02:39:56,920 - test_mcard_api_persistent - DEBUG - Created card with hash: 96f712cc5434a432600d419e2b254eca
2024-12-13 02:39:56,920 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 3 - 2024-12-13T02:39:56.918465
2024-12-13 02:39:56,920 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x111c47790>)
2024-12-13 02:39:56,920 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x111c47790>) completed
2024-12-13 02:39:56,920 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1119fedc0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('958d364e1005e6218e89b520560292bc',))
2024-12-13 02:39:56,920 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1119fedc0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('958d364e1005e6218e89b520560292bc',)) completed
2024-12-13 02:39:56,920 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x1119fedc0>)
2024-12-13 02:39:56,920 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x1119fedc0>) completed
2024-12-13 02:39:56,920 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x1119fedc0>)
2024-12-13 02:39:56,920 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x1119fedc0>) completed
2024-12-13 02:39:56,920 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: 958d364e1005e6218e89b520560292bc to database
2024-12-13 02:39:56,920 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x111c47790>)
2024-12-13 02:39:56,920 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x111c47790>) completed
2024-12-13 02:39:56,921 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1119fccc0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('958d364e1005e6218e89b520560292bc', 'Persistent Test Card 3 - 2024-12-13T02:39:56.918465', '2024-12-12T18:39:56.920896+00:00'))
2024-12-13 02:39:56,921 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1119fccc0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('958d364e1005e6218e89b520560292bc', 'Persistent Test Card 3 - 2024-12-13T02:39:56.918465', '2024-12-12T18:39:56.920896+00:00')) completed
2024-12-13 02:39:56,921 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x111c47790>)
2024-12-13 02:39:56,921 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x111c47790>) completed
2024-12-13 02:39:56,921 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: 958d364e1005e6218e89b520560292bc to database
2024-12-13 02:39:56,921 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x1119fccc0>)
2024-12-13 02:39:56,921 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x1119fccc0>) completed
2024-12-13 02:39:56,921 - test_mcard_api_persistent - DEBUG - Created card with hash: 958d364e1005e6218e89b520560292bc
2024-12-13 02:39:56,921 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x111c47790>)
2024-12-13 02:39:56,921 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x111c47790>) completed
2024-12-13 02:39:56,921 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1119ffa40>, 'SELECT content, g_time FROM card WHERE hash = ?', ('568046dae5b4a07f13d69e5fc707c017',))
2024-12-13 02:39:56,921 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1119ffa40>, 'SELECT content, g_time FROM card WHERE hash = ?', ('568046dae5b4a07f13d69e5fc707c017',)) completed
2024-12-13 02:39:56,921 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x1119ffa40>)
2024-12-13 02:39:56,921 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x1119ffa40>) completed
2024-12-13 02:39:56,921 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x1119ffa40>)
2024-12-13 02:39:56,921 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x1119ffa40>) completed
2024-12-13 02:39:56,921 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: 568046dae5b4a07f13d69e5fc707c017
2024-12-13 02:39:56,921 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x111c47790>)
2024-12-13 02:39:56,921 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x111c47790>) completed
2024-12-13 02:39:56,921 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1119fd040>, 'SELECT content, g_time FROM card WHERE hash = ?', ('96f712cc5434a432600d419e2b254eca',))
2024-12-13 02:39:56,921 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1119fd040>, 'SELECT content, g_time FROM card WHERE hash = ?', ('96f712cc5434a432600d419e2b254eca',)) completed
2024-12-13 02:39:56,921 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x1119fd040>)
2024-12-13 02:39:56,921 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x1119fd040>) completed
2024-12-13 02:39:56,921 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x1119fd040>)
2024-12-13 02:39:56,921 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x1119fd040>) completed
2024-12-13 02:39:56,921 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: 96f712cc5434a432600d419e2b254eca
2024-12-13 02:39:56,921 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x111c47790>)
2024-12-13 02:39:56,921 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x111c47790>) completed
2024-12-13 02:39:56,922 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1119fe3c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('958d364e1005e6218e89b520560292bc',))
2024-12-13 02:39:56,922 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1119fe3c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('958d364e1005e6218e89b520560292bc',)) completed
2024-12-13 02:39:56,922 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x1119fe3c0>)
2024-12-13 02:39:56,922 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x1119fe3c0>) completed
2024-12-13 02:39:56,922 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x1119fe3c0>)
2024-12-13 02:39:56,922 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x1119fe3c0>) completed
2024-12-13 02:39:56,922 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: 958d364e1005e6218e89b520560292bc
2024-12-13 02:39:56,922 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x111c47790>)
2024-12-13 02:39:56,922 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x111c47790>) completed
2024-12-13 02:39:56,922 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1119fc740>, 'SELECT hash, content, g_time FROM card WHERE 1=1 ORDER BY g_time DESC', [])
2024-12-13 02:39:56,922 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1119fc740>, 'SELECT hash, content, g_time FROM card WHERE 1=1 ORDER BY g_time DESC', []) completed
2024-12-13 02:39:56,922 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x1119fc740>)
2024-12-13 02:39:56,922 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x1119fc740>) completed
2024-12-13 02:39:56,922 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x1119fc740>)
2024-12-13 02:39:56,922 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x1119fc740>) completed
2024-12-13 02:39:56,922 - test_mcard_api_persistent - DEBUG - Verifying database contents in ./tests/data/test_mcard.db
2024-12-13 02:39:56,922 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x111ce3ec0>
2024-12-13 02:39:56,922 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x111ce3ec0> completed
2024-12-13 02:39:56,922 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x111d0d5d0>, 'SELECT hash, content FROM card', [])
2024-12-13 02:39:56,922 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x111d0d5d0>, 'SELECT hash, content FROM card', []) completed
2024-12-13 02:39:56,923 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x1119fc940>)
2024-12-13 02:39:56,923 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x1119fc940>) completed
2024-12-13 02:39:56,923 - test_mcard_api_persistent - DEBUG - 
Database Contents:
2024-12-13 02:39:56,923 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x1119fc940>)
2024-12-13 02:39:56,923 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x1119fc940>) completed
2024-12-13 02:39:56,923 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x111d0d5d0>)
2024-12-13 02:39:56,923 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x111d0d5d0>) completed
2024-12-13 02:39:56,951 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:40:28,378 - mcard.application.card_provisioning_app - DEBUG - Logging system initialized.
2024-12-13 02:40:28,378 - mcard.application.card_provisioning_app - DEBUG - Logging system initialized.
2024-12-13 02:40:28,546 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:40:28,547 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:40:28,547 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Initializing SQLite database at ./data/ROOT_mcard_DOT_ENV.db
2024-12-13 02:40:28,548 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x1079e56c0>
2024-12-13 02:40:28,548 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x1079e56c0> completed
2024-12-13 02:40:28,548 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x1079f8a90>, 'PRAGMA journal_mode=WAL', [])
2024-12-13 02:40:28,549 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x1079f8a90>, 'PRAGMA journal_mode=WAL', []) completed
2024-12-13 02:40:28,549 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x1079f8a90>, 'PRAGMA synchronous=NORMAL', [])
2024-12-13 02:40:28,549 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x1079f8a90>, 'PRAGMA synchronous=NORMAL', []) completed
2024-12-13 02:40:28,549 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x1079f8a90>, 'PRAGMA foreign_keys=ON', [])
2024-12-13 02:40:28,549 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x1079f8a90>, 'PRAGMA foreign_keys=ON', []) completed
2024-12-13 02:40:28,549 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x1079f8a90>, 'PRAGMA busy_timeout=30.0', [])
2024-12-13 02:40:28,549 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x1079f8a90>, 'PRAGMA busy_timeout=30.0', []) completed
2024-12-13 02:40:28,549 - mcard.infrastructure.persistence.schema - DEBUG - Starting SQLite schema initialization for tables: ['card']
2024-12-13 02:40:28,549 - mcard.infrastructure.persistence.schema - DEBUG - Processing table: card
2024-12-13 02:40:28,549 - mcard.infrastructure.persistence.schema - DEBUG - Table creation SQL: CREATE TABLE IF NOT EXISTS card (
id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
hash TEXT NOT NULL UNIQUE,
content TEXT NOT NULL,
g_time TEXT NOT NULL,
metadata TEXT
)
2024-12-13 02:40:28,549 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x1079f8a90>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', [])
2024-12-13 02:40:28,549 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x1079f8a90>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', []) completed
2024-12-13 02:40:28,550 - mcard.infrastructure.persistence.schema - INFO - Initialized table card in SQLite database
2024-12-13 02:40:28,550 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)
2024-12-13 02:40:28,550 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x1079f8a90>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', [])
2024-12-13 02:40:28,550 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x1079f8a90>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', []) completed
2024-12-13 02:40:28,550 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_g_time
2024-12-13 02:40:28,550 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)
2024-12-13 02:40:28,550 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x1079f8a90>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', [])
2024-12-13 02:40:28,550 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x1079f8a90>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', []) completed
2024-12-13 02:40:28,550 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_hash
2024-12-13 02:40:28,550 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x1079f8a90>)
2024-12-13 02:40:28,550 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x1079f8a90>) completed
2024-12-13 02:40:28,550 - mcard.infrastructure.persistence.schema - INFO - SQLite schema initialization completed successfully
2024-12-13 02:40:28,550 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x1079f8a90>)
2024-12-13 02:40:28,550 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x1079f8a90>) completed
2024-12-13 02:40:28,550 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x1079e51c0>
2024-12-13 02:40:28,550 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x1079e51c0> completed
2024-12-13 02:40:28,550 - mcard.infrastructure.persistence.schema - DEBUG - Starting SQLite schema initialization for tables: ['card']
2024-12-13 02:40:28,550 - mcard.infrastructure.persistence.schema - DEBUG - Processing table: card
2024-12-13 02:40:28,550 - mcard.infrastructure.persistence.schema - DEBUG - Table creation SQL: CREATE TABLE IF NOT EXISTS card (
id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
hash TEXT NOT NULL UNIQUE,
content TEXT NOT NULL,
g_time TEXT NOT NULL,
metadata TEXT
)
2024-12-13 02:40:28,550 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x1079f9990>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', [])
2024-12-13 02:40:28,551 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x1079f9990>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', []) completed
2024-12-13 02:40:28,551 - mcard.infrastructure.persistence.schema - INFO - Initialized table card in SQLite database
2024-12-13 02:40:28,551 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)
2024-12-13 02:40:28,551 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x1079f9990>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', [])
2024-12-13 02:40:28,551 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x1079f9990>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', []) completed
2024-12-13 02:40:28,551 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_g_time
2024-12-13 02:40:28,551 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)
2024-12-13 02:40:28,551 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x1079f9990>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', [])
2024-12-13 02:40:28,551 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x1079f9990>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', []) completed
2024-12-13 02:40:28,551 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_hash
2024-12-13 02:40:28,551 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x1079f9990>)
2024-12-13 02:40:28,551 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x1079f9990>) completed
2024-12-13 02:40:28,551 - mcard.infrastructure.persistence.schema - INFO - SQLite schema initialization completed successfully
2024-12-13 02:40:28,551 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1079f9990>)
2024-12-13 02:40:28,551 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1079f9990>) completed
2024-12-13 02:40:28,551 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105701cc0>, 'DELETE FROM card', [])
2024-12-13 02:40:28,551 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105701cc0>, 'DELETE FROM card', []) completed
2024-12-13 02:40:28,551 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x1079f9990>)
2024-12-13 02:40:28,552 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x1079f9990>) completed
2024-12-13 02:40:28,552 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x1079f9990>)
2024-12-13 02:40:28,552 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x1079f9990>) completed
2024-12-13 02:40:28,552 - mcard.application.card_provisioning_app - DEBUG - CardProvisioningApp initialized with store and hashing service.
2024-12-13 02:40:28,552 - mcard.application.card_provisioning_app - DEBUG - CardProvisioningApp initialized with store and hashing service.
2024-12-13 02:40:28,555 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1079f8a90>)
2024-12-13 02:40:28,555 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1079f8a90>) completed
2024-12-13 02:40:28,560 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105701740>, 'DELETE FROM card', [])
2024-12-13 02:40:28,563 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105701740>, 'DELETE FROM card', []) completed
2024-12-13 02:40:28,573 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x1079f8a90>)
2024-12-13 02:40:28,575 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x1079f8a90>) completed
2024-12-13 02:40:28,576 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x105701740>)
2024-12-13 02:40:28,576 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x105701740>) completed
2024-12-13 02:40:28,577 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 1 - 2024-12-13T02:40:28.577238
2024-12-13 02:40:28,577 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1079f8a90>)
2024-12-13 02:40:28,577 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1079f8a90>) completed
2024-12-13 02:40:28,577 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105701bc0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('1db380741dcf099c1d90d74a60eaa8b8',))
2024-12-13 02:40:28,577 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105701bc0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('1db380741dcf099c1d90d74a60eaa8b8',)) completed
2024-12-13 02:40:28,577 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x105701bc0>)
2024-12-13 02:40:28,577 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x105701bc0>) completed
2024-12-13 02:40:28,577 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x105701bc0>)
2024-12-13 02:40:28,577 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x105701bc0>) completed
2024-12-13 02:40:28,578 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: 1db380741dcf099c1d90d74a60eaa8b8 to database
2024-12-13 02:40:28,578 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1079f8a90>)
2024-12-13 02:40:28,578 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1079f8a90>) completed
2024-12-13 02:40:28,578 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105700ec0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('1db380741dcf099c1d90d74a60eaa8b8', 'Persistent Test Card 1 - 2024-12-13T02:40:28.577238', '2024-12-12T18:40:28.577869+00:00'))
2024-12-13 02:40:28,578 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105700ec0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('1db380741dcf099c1d90d74a60eaa8b8', 'Persistent Test Card 1 - 2024-12-13T02:40:28.577238', '2024-12-12T18:40:28.577869+00:00')) completed
2024-12-13 02:40:28,578 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x1079f8a90>)
2024-12-13 02:40:28,578 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x1079f8a90>) completed
2024-12-13 02:40:28,578 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: 1db380741dcf099c1d90d74a60eaa8b8 to database
2024-12-13 02:40:28,578 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x105700ec0>)
2024-12-13 02:40:28,578 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x105700ec0>) completed
2024-12-13 02:40:28,578 - test_mcard_api_persistent - DEBUG - Created card with hash: 1db380741dcf099c1d90d74a60eaa8b8
2024-12-13 02:40:28,578 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 2 - 2024-12-13T02:40:28.577246
2024-12-13 02:40:28,578 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1079f8a90>)
2024-12-13 02:40:28,578 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1079f8a90>) completed
2024-12-13 02:40:28,578 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1057009c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('7344945d426eb1af0dfad112fe161eaa',))
2024-12-13 02:40:28,578 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1057009c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('7344945d426eb1af0dfad112fe161eaa',)) completed
2024-12-13 02:40:28,578 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x1057009c0>)
2024-12-13 02:40:28,579 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x1057009c0>) completed
2024-12-13 02:40:28,579 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x1057009c0>)
2024-12-13 02:40:28,579 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x1057009c0>) completed
2024-12-13 02:40:28,579 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: 7344945d426eb1af0dfad112fe161eaa to database
2024-12-13 02:40:28,579 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1079f8a90>)
2024-12-13 02:40:28,579 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1079f8a90>) completed
2024-12-13 02:40:28,579 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1057007c0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('7344945d426eb1af0dfad112fe161eaa', 'Persistent Test Card 2 - 2024-12-13T02:40:28.577246', '2024-12-12T18:40:28.579166+00:00'))
2024-12-13 02:40:28,579 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1057007c0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('7344945d426eb1af0dfad112fe161eaa', 'Persistent Test Card 2 - 2024-12-13T02:40:28.577246', '2024-12-12T18:40:28.579166+00:00')) completed
2024-12-13 02:40:28,579 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x1079f8a90>)
2024-12-13 02:40:28,579 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x1079f8a90>) completed
2024-12-13 02:40:28,579 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: 7344945d426eb1af0dfad112fe161eaa to database
2024-12-13 02:40:28,579 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x1057007c0>)
2024-12-13 02:40:28,579 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x1057007c0>) completed
2024-12-13 02:40:28,579 - test_mcard_api_persistent - DEBUG - Created card with hash: 7344945d426eb1af0dfad112fe161eaa
2024-12-13 02:40:28,579 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 3 - 2024-12-13T02:40:28.577247
2024-12-13 02:40:28,579 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1079f8a90>)
2024-12-13 02:40:28,579 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1079f8a90>) completed
2024-12-13 02:40:28,579 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105700f40>, 'SELECT content, g_time FROM card WHERE hash = ?', ('0eb53081cb7adfbf1f2739ddc90f5879',))
2024-12-13 02:40:28,579 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105700f40>, 'SELECT content, g_time FROM card WHERE hash = ?', ('0eb53081cb7adfbf1f2739ddc90f5879',)) completed
2024-12-13 02:40:28,579 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x105700f40>)
2024-12-13 02:40:28,579 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x105700f40>) completed
2024-12-13 02:40:28,579 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x105700f40>)
2024-12-13 02:40:28,580 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x105700f40>) completed
2024-12-13 02:40:28,580 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: 0eb53081cb7adfbf1f2739ddc90f5879 to database
2024-12-13 02:40:28,580 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1079f8a90>)
2024-12-13 02:40:28,580 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1079f8a90>) completed
2024-12-13 02:40:28,580 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105702040>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('0eb53081cb7adfbf1f2739ddc90f5879', 'Persistent Test Card 3 - 2024-12-13T02:40:28.577247', '2024-12-12T18:40:28.580078+00:00'))
2024-12-13 02:40:28,580 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105702040>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('0eb53081cb7adfbf1f2739ddc90f5879', 'Persistent Test Card 3 - 2024-12-13T02:40:28.577247', '2024-12-12T18:40:28.580078+00:00')) completed
2024-12-13 02:40:28,580 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x1079f8a90>)
2024-12-13 02:40:28,580 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x1079f8a90>) completed
2024-12-13 02:40:28,580 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: 0eb53081cb7adfbf1f2739ddc90f5879 to database
2024-12-13 02:40:28,580 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x105702040>)
2024-12-13 02:40:28,580 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x105702040>) completed
2024-12-13 02:40:28,581 - test_mcard_api_persistent - DEBUG - Created card with hash: 0eb53081cb7adfbf1f2739ddc90f5879
2024-12-13 02:40:28,581 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1079f8a90>)
2024-12-13 02:40:28,581 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1079f8a90>) completed
2024-12-13 02:40:28,581 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105701b40>, 'SELECT content, g_time FROM card WHERE hash = ?', ('1db380741dcf099c1d90d74a60eaa8b8',))
2024-12-13 02:40:28,581 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105701b40>, 'SELECT content, g_time FROM card WHERE hash = ?', ('1db380741dcf099c1d90d74a60eaa8b8',)) completed
2024-12-13 02:40:28,581 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x105701b40>)
2024-12-13 02:40:28,581 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x105701b40>) completed
2024-12-13 02:40:28,581 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x105701b40>)
2024-12-13 02:40:28,581 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x105701b40>) completed
2024-12-13 02:40:28,581 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: 1db380741dcf099c1d90d74a60eaa8b8
2024-12-13 02:40:28,581 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1079f8a90>)
2024-12-13 02:40:28,581 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1079f8a90>) completed
2024-12-13 02:40:28,581 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1057313c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('7344945d426eb1af0dfad112fe161eaa',))
2024-12-13 02:40:28,581 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1057313c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('7344945d426eb1af0dfad112fe161eaa',)) completed
2024-12-13 02:40:28,581 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x1057313c0>)
2024-12-13 02:40:28,581 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x1057313c0>) completed
2024-12-13 02:40:28,581 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x1057313c0>)
2024-12-13 02:40:28,581 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x1057313c0>) completed
2024-12-13 02:40:28,582 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: 7344945d426eb1af0dfad112fe161eaa
2024-12-13 02:40:28,582 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1079f8a90>)
2024-12-13 02:40:28,582 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1079f8a90>) completed
2024-12-13 02:40:28,582 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1064b2640>, 'SELECT content, g_time FROM card WHERE hash = ?', ('0eb53081cb7adfbf1f2739ddc90f5879',))
2024-12-13 02:40:28,582 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1064b2640>, 'SELECT content, g_time FROM card WHERE hash = ?', ('0eb53081cb7adfbf1f2739ddc90f5879',)) completed
2024-12-13 02:40:28,582 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x1064b2640>)
2024-12-13 02:40:28,582 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x1064b2640>) completed
2024-12-13 02:40:28,582 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x1064b2640>)
2024-12-13 02:40:28,582 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x1064b2640>) completed
2024-12-13 02:40:28,582 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: 0eb53081cb7adfbf1f2739ddc90f5879
2024-12-13 02:40:28,582 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1079f8a90>)
2024-12-13 02:40:28,582 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1079f8a90>) completed
2024-12-13 02:40:28,582 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105701340>, 'SELECT hash, content, g_time FROM card WHERE 1=1 ORDER BY g_time DESC', [])
2024-12-13 02:40:28,582 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105701340>, 'SELECT hash, content, g_time FROM card WHERE 1=1 ORDER BY g_time DESC', []) completed
2024-12-13 02:40:28,582 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x105701340>)
2024-12-13 02:40:28,582 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x105701340>) completed
2024-12-13 02:40:28,582 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x105701340>)
2024-12-13 02:40:28,582 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x105701340>) completed
2024-12-13 02:40:28,582 - test_mcard_api_persistent - DEBUG - Verifying database contents in ./tests/data/test_mcard.db
2024-12-13 02:40:28,582 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x1079e60c0>
2024-12-13 02:40:28,583 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x1079e60c0> completed
2024-12-13 02:40:28,583 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x1079fa7a0>, 'SELECT hash, content FROM card', [])
2024-12-13 02:40:28,583 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x1079fa7a0>, 'SELECT hash, content FROM card', []) completed
2024-12-13 02:40:28,583 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x1064b2540>)
2024-12-13 02:40:28,583 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x1064b2540>) completed
2024-12-13 02:40:28,583 - test_mcard_api_persistent - DEBUG - 
Database Contents:
2024-12-13 02:40:28,583 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x1064b2540>)
2024-12-13 02:40:28,583 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x1064b2540>) completed
2024-12-13 02:40:28,583 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x1079fa7a0>)
2024-12-13 02:40:28,583 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x1079fa7a0>) completed
2024-12-13 02:40:28,605 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:41:20,841 - mcard.application.card_provisioning_app - DEBUG - Logging system initialized.
2024-12-13 02:41:20,841 - mcard.application.card_provisioning_app - DEBUG - Logging system initialized.
2024-12-13 02:41:20,985 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:41:20,985 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:41:20,986 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Initializing SQLite database at ./data/ROOT_mcard_DOT_ENV_UPDATED.db
2024-12-13 02:41:20,986 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x104f46980>
2024-12-13 02:41:20,986 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x104f46980> completed
2024-12-13 02:41:20,986 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x104ec35b0>, 'PRAGMA journal_mode=WAL', [])
2024-12-13 02:41:20,986 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x104ec35b0>, 'PRAGMA journal_mode=WAL', []) completed
2024-12-13 02:41:20,986 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x104ec35b0>, 'PRAGMA synchronous=NORMAL', [])
2024-12-13 02:41:20,986 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x104ec35b0>, 'PRAGMA synchronous=NORMAL', []) completed
2024-12-13 02:41:20,987 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x104ec35b0>, 'PRAGMA foreign_keys=ON', [])
2024-12-13 02:41:20,987 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x104ec35b0>, 'PRAGMA foreign_keys=ON', []) completed
2024-12-13 02:41:20,987 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x104ec35b0>, 'PRAGMA busy_timeout=30.0', [])
2024-12-13 02:41:20,987 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x104ec35b0>, 'PRAGMA busy_timeout=30.0', []) completed
2024-12-13 02:41:20,987 - mcard.infrastructure.persistence.schema - DEBUG - Starting SQLite schema initialization for tables: ['card']
2024-12-13 02:41:20,987 - mcard.infrastructure.persistence.schema - DEBUG - Processing table: card
2024-12-13 02:41:20,987 - mcard.infrastructure.persistence.schema - DEBUG - Table creation SQL: CREATE TABLE IF NOT EXISTS card (
id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
hash TEXT NOT NULL UNIQUE,
content TEXT NOT NULL,
g_time TEXT NOT NULL,
metadata TEXT
)
2024-12-13 02:41:20,987 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x104ec35b0>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', [])
2024-12-13 02:41:20,987 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x104ec35b0>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', []) completed
2024-12-13 02:41:20,987 - mcard.infrastructure.persistence.schema - INFO - Initialized table card in SQLite database
2024-12-13 02:41:20,987 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)
2024-12-13 02:41:20,987 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x104ec35b0>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', [])
2024-12-13 02:41:20,987 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x104ec35b0>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', []) completed
2024-12-13 02:41:20,987 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_g_time
2024-12-13 02:41:20,987 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)
2024-12-13 02:41:20,987 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x104ec35b0>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', [])
2024-12-13 02:41:20,987 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x104ec35b0>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', []) completed
2024-12-13 02:41:20,987 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_hash
2024-12-13 02:41:20,988 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x104ec35b0>)
2024-12-13 02:41:20,988 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x104ec35b0>) completed
2024-12-13 02:41:20,988 - mcard.infrastructure.persistence.schema - INFO - SQLite schema initialization completed successfully
2024-12-13 02:41:20,988 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x104ec35b0>)
2024-12-13 02:41:20,988 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x104ec35b0>) completed
2024-12-13 02:41:20,988 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x104f476a0>
2024-12-13 02:41:20,988 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x104f476a0> completed
2024-12-13 02:41:20,988 - mcard.infrastructure.persistence.schema - DEBUG - Starting SQLite schema initialization for tables: ['card']
2024-12-13 02:41:20,988 - mcard.infrastructure.persistence.schema - DEBUG - Processing table: card
2024-12-13 02:41:20,988 - mcard.infrastructure.persistence.schema - DEBUG - Table creation SQL: CREATE TABLE IF NOT EXISTS card (
id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
hash TEXT NOT NULL UNIQUE,
content TEXT NOT NULL,
g_time TEXT NOT NULL,
metadata TEXT
)
2024-12-13 02:41:20,988 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x104f845e0>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', [])
2024-12-13 02:41:20,989 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x104f845e0>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', []) completed
2024-12-13 02:41:20,989 - mcard.infrastructure.persistence.schema - INFO - Initialized table card in SQLite database
2024-12-13 02:41:20,989 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)
2024-12-13 02:41:20,989 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x104f845e0>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', [])
2024-12-13 02:41:20,989 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x104f845e0>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', []) completed
2024-12-13 02:41:20,989 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_g_time
2024-12-13 02:41:20,989 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)
2024-12-13 02:41:20,989 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x104f845e0>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', [])
2024-12-13 02:41:20,989 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x104f845e0>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', []) completed
2024-12-13 02:41:20,989 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_hash
2024-12-13 02:41:20,989 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x104f845e0>)
2024-12-13 02:41:21,007 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x104f845e0>) completed
2024-12-13 02:41:21,007 - mcard.infrastructure.persistence.schema - INFO - SQLite schema initialization completed successfully
2024-12-13 02:41:21,008 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x104f845e0>)
2024-12-13 02:41:21,008 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x104f845e0>) completed
2024-12-13 02:41:21,008 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104c4d5c0>, 'DELETE FROM card', [])
2024-12-13 02:41:21,009 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104c4d5c0>, 'DELETE FROM card', []) completed
2024-12-13 02:41:21,010 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x104f845e0>)
2024-12-13 02:41:21,010 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x104f845e0>) completed
2024-12-13 02:41:21,011 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x104f845e0>)
2024-12-13 02:41:21,011 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x104f845e0>) completed
2024-12-13 02:41:21,011 - mcard.application.card_provisioning_app - DEBUG - CardProvisioningApp initialized with store and hashing service.
2024-12-13 02:41:21,011 - mcard.application.card_provisioning_app - DEBUG - CardProvisioningApp initialized with store and hashing service.
2024-12-13 02:41:21,011 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x104ec35b0>)
2024-12-13 02:41:21,011 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x104ec35b0>) completed
2024-12-13 02:41:21,012 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104c4e5c0>, 'DELETE FROM card', [])
2024-12-13 02:41:21,012 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104c4e5c0>, 'DELETE FROM card', []) completed
2024-12-13 02:41:21,012 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x104ec35b0>)
2024-12-13 02:41:21,012 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x104ec35b0>) completed
2024-12-13 02:41:21,013 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x104c4e5c0>)
2024-12-13 02:41:21,013 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x104c4e5c0>) completed
2024-12-13 02:41:21,014 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 1 - 2024-12-13T02:41:21.014518
2024-12-13 02:41:21,014 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x104ec35b0>)
2024-12-13 02:41:21,014 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x104ec35b0>) completed
2024-12-13 02:41:21,015 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104c4f6c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('67e50a3b03f6e5ccca09baf4ffe40ded',))
2024-12-13 02:41:21,015 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104c4f6c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('67e50a3b03f6e5ccca09baf4ffe40ded',)) completed
2024-12-13 02:41:21,015 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x104c4f6c0>)
2024-12-13 02:41:21,015 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x104c4f6c0>) completed
2024-12-13 02:41:21,015 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x104c4f6c0>)
2024-12-13 02:41:21,015 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x104c4f6c0>) completed
2024-12-13 02:41:21,016 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: 67e50a3b03f6e5ccca09baf4ffe40ded to database
2024-12-13 02:41:21,016 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x104ec35b0>)
2024-12-13 02:41:21,016 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x104ec35b0>) completed
2024-12-13 02:41:21,016 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104d9f4c0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('67e50a3b03f6e5ccca09baf4ffe40ded', 'Persistent Test Card 1 - 2024-12-13T02:41:21.014518', '2024-12-12T18:41:21.015815+00:00'))
2024-12-13 02:41:21,016 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104d9f4c0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('67e50a3b03f6e5ccca09baf4ffe40ded', 'Persistent Test Card 1 - 2024-12-13T02:41:21.014518', '2024-12-12T18:41:21.015815+00:00')) completed
2024-12-13 02:41:21,016 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x104ec35b0>)
2024-12-13 02:41:21,016 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x104ec35b0>) completed
2024-12-13 02:41:21,017 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: 67e50a3b03f6e5ccca09baf4ffe40ded to database
2024-12-13 02:41:21,017 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x104d9f4c0>)
2024-12-13 02:41:21,017 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x104d9f4c0>) completed
2024-12-13 02:41:21,017 - test_mcard_api_persistent - DEBUG - Created card with hash: 67e50a3b03f6e5ccca09baf4ffe40ded
2024-12-13 02:41:21,017 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 2 - 2024-12-13T02:41:21.014524
2024-12-13 02:41:21,017 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x104ec35b0>)
2024-12-13 02:41:21,017 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x104ec35b0>) completed
2024-12-13 02:41:21,018 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104d9fb40>, 'SELECT content, g_time FROM card WHERE hash = ?', ('d415774d137a4ac66fc10bc188b7c9bc',))
2024-12-13 02:41:21,018 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104d9fb40>, 'SELECT content, g_time FROM card WHERE hash = ?', ('d415774d137a4ac66fc10bc188b7c9bc',)) completed
2024-12-13 02:41:21,019 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x104d9fb40>)
2024-12-13 02:41:21,019 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x104d9fb40>) completed
2024-12-13 02:41:21,019 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x104d9fb40>)
2024-12-13 02:41:21,019 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x104d9fb40>) completed
2024-12-13 02:41:21,019 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: d415774d137a4ac66fc10bc188b7c9bc to database
2024-12-13 02:41:21,019 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x104ec35b0>)
2024-12-13 02:41:21,019 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x104ec35b0>) completed
2024-12-13 02:41:21,019 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104d072c0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('d415774d137a4ac66fc10bc188b7c9bc', 'Persistent Test Card 2 - 2024-12-13T02:41:21.014524', '2024-12-12T18:41:21.019673+00:00'))
2024-12-13 02:41:21,019 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104d072c0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('d415774d137a4ac66fc10bc188b7c9bc', 'Persistent Test Card 2 - 2024-12-13T02:41:21.014524', '2024-12-12T18:41:21.019673+00:00')) completed
2024-12-13 02:41:21,020 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x104ec35b0>)
2024-12-13 02:41:21,020 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x104ec35b0>) completed
2024-12-13 02:41:21,021 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: d415774d137a4ac66fc10bc188b7c9bc to database
2024-12-13 02:41:21,021 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x104d072c0>)
2024-12-13 02:41:21,021 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x104d072c0>) completed
2024-12-13 02:41:21,021 - test_mcard_api_persistent - DEBUG - Created card with hash: d415774d137a4ac66fc10bc188b7c9bc
2024-12-13 02:41:21,022 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 3 - 2024-12-13T02:41:21.014526
2024-12-13 02:41:21,022 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x104ec35b0>)
2024-12-13 02:41:21,022 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x104ec35b0>) completed
2024-12-13 02:41:21,022 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104d04740>, 'SELECT content, g_time FROM card WHERE hash = ?', ('829bc92161b6155dc04c937f9f31e955',))
2024-12-13 02:41:21,022 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104d04740>, 'SELECT content, g_time FROM card WHERE hash = ?', ('829bc92161b6155dc04c937f9f31e955',)) completed
2024-12-13 02:41:21,022 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x104d04740>)
2024-12-13 02:41:21,022 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x104d04740>) completed
2024-12-13 02:41:21,022 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x104d04740>)
2024-12-13 02:41:21,022 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x104d04740>) completed
2024-12-13 02:41:21,023 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: 829bc92161b6155dc04c937f9f31e955 to database
2024-12-13 02:41:21,023 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x104ec35b0>)
2024-12-13 02:41:21,023 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x104ec35b0>) completed
2024-12-13 02:41:21,023 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x103bb9d40>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('829bc92161b6155dc04c937f9f31e955', 'Persistent Test Card 3 - 2024-12-13T02:41:21.014526', '2024-12-12T18:41:21.023138+00:00'))
2024-12-13 02:41:21,023 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x103bb9d40>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('829bc92161b6155dc04c937f9f31e955', 'Persistent Test Card 3 - 2024-12-13T02:41:21.014526', '2024-12-12T18:41:21.023138+00:00')) completed
2024-12-13 02:41:21,024 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x104ec35b0>)
2024-12-13 02:41:21,024 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x104ec35b0>) completed
2024-12-13 02:41:21,024 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: 829bc92161b6155dc04c937f9f31e955 to database
2024-12-13 02:41:21,024 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x103bb9d40>)
2024-12-13 02:41:21,024 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x103bb9d40>) completed
2024-12-13 02:41:21,024 - test_mcard_api_persistent - DEBUG - Created card with hash: 829bc92161b6155dc04c937f9f31e955
2024-12-13 02:41:21,024 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x104ec35b0>)
2024-12-13 02:41:21,024 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x104ec35b0>) completed
2024-12-13 02:41:21,024 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x103bba4c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('67e50a3b03f6e5ccca09baf4ffe40ded',))
2024-12-13 02:41:21,024 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x103bba4c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('67e50a3b03f6e5ccca09baf4ffe40ded',)) completed
2024-12-13 02:41:21,024 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x103bba4c0>)
2024-12-13 02:41:21,024 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x103bba4c0>) completed
2024-12-13 02:41:21,024 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x103bba4c0>)
2024-12-13 02:41:21,024 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x103bba4c0>) completed
2024-12-13 02:41:21,024 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: 67e50a3b03f6e5ccca09baf4ffe40ded
2024-12-13 02:41:21,024 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x104ec35b0>)
2024-12-13 02:41:21,024 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x104ec35b0>) completed
2024-12-13 02:41:21,024 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x103bba440>, 'SELECT content, g_time FROM card WHERE hash = ?', ('d415774d137a4ac66fc10bc188b7c9bc',))
2024-12-13 02:41:21,024 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x103bba440>, 'SELECT content, g_time FROM card WHERE hash = ?', ('d415774d137a4ac66fc10bc188b7c9bc',)) completed
2024-12-13 02:41:21,025 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x103bba440>)
2024-12-13 02:41:21,025 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x103bba440>) completed
2024-12-13 02:41:21,025 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x103bba440>)
2024-12-13 02:41:21,025 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x103bba440>) completed
2024-12-13 02:41:21,025 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: d415774d137a4ac66fc10bc188b7c9bc
2024-12-13 02:41:21,025 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x104ec35b0>)
2024-12-13 02:41:21,025 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x104ec35b0>) completed
2024-12-13 02:41:21,025 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x103bb9fc0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('829bc92161b6155dc04c937f9f31e955',))
2024-12-13 02:41:21,025 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x103bb9fc0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('829bc92161b6155dc04c937f9f31e955',)) completed
2024-12-13 02:41:21,025 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x103bb9fc0>)
2024-12-13 02:41:21,025 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x103bb9fc0>) completed
2024-12-13 02:41:21,025 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x103bb9fc0>)
2024-12-13 02:41:21,025 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x103bb9fc0>) completed
2024-12-13 02:41:21,025 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: 829bc92161b6155dc04c937f9f31e955
2024-12-13 02:41:21,025 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x104ec35b0>)
2024-12-13 02:41:21,025 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x104ec35b0>) completed
2024-12-13 02:41:21,025 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x103bb9ec0>, 'SELECT hash, content, g_time FROM card WHERE 1=1 ORDER BY g_time DESC', [])
2024-12-13 02:41:21,025 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x103bb9ec0>, 'SELECT hash, content, g_time FROM card WHERE 1=1 ORDER BY g_time DESC', []) completed
2024-12-13 02:41:21,025 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x103bb9ec0>)
2024-12-13 02:41:21,025 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x103bb9ec0>) completed
2024-12-13 02:41:21,026 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x103bb9ec0>)
2024-12-13 02:41:21,026 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x103bb9ec0>) completed
2024-12-13 02:41:21,026 - test_mcard_api_persistent - DEBUG - Verifying database contents in ./tests/data/test_mcard.db
2024-12-13 02:41:21,026 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x104bc8c20>
2024-12-13 02:41:21,026 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x104bc8c20> completed
2024-12-13 02:41:21,026 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x104f85210>, 'SELECT hash, content FROM card', [])
2024-12-13 02:41:21,026 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x104f85210>, 'SELECT hash, content FROM card', []) completed
2024-12-13 02:41:21,026 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x103bba040>)
2024-12-13 02:41:21,026 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x103bba040>) completed
2024-12-13 02:41:21,026 - test_mcard_api_persistent - DEBUG - 
Database Contents:
2024-12-13 02:41:21,027 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x103bba040>)
2024-12-13 02:41:21,027 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x103bba040>) completed
2024-12-13 02:41:21,027 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x104f85210>)
2024-12-13 02:41:21,027 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x104f85210>) completed
2024-12-13 02:41:21,083 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:42:01,531 - mcard.application.card_provisioning_app - DEBUG - Logging system initialized.
2024-12-13 02:42:01,531 - mcard.application.card_provisioning_app - DEBUG - Logging system initialized.
2024-12-13 02:42:01,673 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:42:01,674 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:42:01,674 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Initializing SQLite database at ./data/ROOT_mcard_DOT_ENV.db
2024-12-13 02:42:01,674 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x1046ee980>
2024-12-13 02:42:01,675 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x1046ee980> completed
2024-12-13 02:42:01,675 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x10466be20>, 'PRAGMA journal_mode=WAL', [])
2024-12-13 02:42:01,675 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x10466be20>, 'PRAGMA journal_mode=WAL', []) completed
2024-12-13 02:42:01,675 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x10466be20>, 'PRAGMA synchronous=NORMAL', [])
2024-12-13 02:42:01,675 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x10466be20>, 'PRAGMA synchronous=NORMAL', []) completed
2024-12-13 02:42:01,675 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x10466be20>, 'PRAGMA foreign_keys=ON', [])
2024-12-13 02:42:01,675 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x10466be20>, 'PRAGMA foreign_keys=ON', []) completed
2024-12-13 02:42:01,675 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x10466be20>, 'PRAGMA busy_timeout=30.0', [])
2024-12-13 02:42:01,675 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x10466be20>, 'PRAGMA busy_timeout=30.0', []) completed
2024-12-13 02:42:01,675 - mcard.infrastructure.persistence.schema - DEBUG - Starting SQLite schema initialization for tables: ['card']
2024-12-13 02:42:01,675 - mcard.infrastructure.persistence.schema - DEBUG - Processing table: card
2024-12-13 02:42:01,675 - mcard.infrastructure.persistence.schema - DEBUG - Table creation SQL: CREATE TABLE IF NOT EXISTS card (
id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
hash TEXT NOT NULL UNIQUE,
content TEXT NOT NULL,
g_time TEXT NOT NULL,
metadata TEXT
)
2024-12-13 02:42:01,676 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x10466be20>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', [])
2024-12-13 02:42:01,676 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x10466be20>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', []) completed
2024-12-13 02:42:01,676 - mcard.infrastructure.persistence.schema - INFO - Initialized table card in SQLite database
2024-12-13 02:42:01,676 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)
2024-12-13 02:42:01,676 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x10466be20>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', [])
2024-12-13 02:42:01,676 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x10466be20>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', []) completed
2024-12-13 02:42:01,676 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_g_time
2024-12-13 02:42:01,676 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)
2024-12-13 02:42:01,676 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x10466be20>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', [])
2024-12-13 02:42:01,676 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x10466be20>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', []) completed
2024-12-13 02:42:01,676 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_hash
2024-12-13 02:42:01,676 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10466be20>)
2024-12-13 02:42:01,676 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10466be20>) completed
2024-12-13 02:42:01,676 - mcard.infrastructure.persistence.schema - INFO - SQLite schema initialization completed successfully
2024-12-13 02:42:01,676 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10466be20>)
2024-12-13 02:42:01,676 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10466be20>) completed
2024-12-13 02:42:01,676 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x1046ef6a0>
2024-12-13 02:42:01,676 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x1046ef6a0> completed
2024-12-13 02:42:01,677 - mcard.infrastructure.persistence.schema - DEBUG - Starting SQLite schema initialization for tables: ['card']
2024-12-13 02:42:01,677 - mcard.infrastructure.persistence.schema - DEBUG - Processing table: card
2024-12-13 02:42:01,677 - mcard.infrastructure.persistence.schema - DEBUG - Table creation SQL: CREATE TABLE IF NOT EXISTS card (
id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
hash TEXT NOT NULL UNIQUE,
content TEXT NOT NULL,
g_time TEXT NOT NULL,
metadata TEXT
)
2024-12-13 02:42:01,677 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x1048247c0>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', [])
2024-12-13 02:42:01,677 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x1048247c0>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', []) completed
2024-12-13 02:42:01,677 - mcard.infrastructure.persistence.schema - INFO - Initialized table card in SQLite database
2024-12-13 02:42:01,677 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)
2024-12-13 02:42:01,677 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x1048247c0>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', [])
2024-12-13 02:42:01,677 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x1048247c0>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', []) completed
2024-12-13 02:42:01,677 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_g_time
2024-12-13 02:42:01,677 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)
2024-12-13 02:42:01,677 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x1048247c0>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', [])
2024-12-13 02:42:01,677 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x1048247c0>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', []) completed
2024-12-13 02:42:01,677 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_hash
2024-12-13 02:42:01,677 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x1048247c0>)
2024-12-13 02:42:01,693 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x1048247c0>) completed
2024-12-13 02:42:01,693 - mcard.infrastructure.persistence.schema - INFO - SQLite schema initialization completed successfully
2024-12-13 02:42:01,693 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1048247c0>)
2024-12-13 02:42:01,693 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1048247c0>) completed
2024-12-13 02:42:01,693 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10403d5c0>, 'DELETE FROM card', [])
2024-12-13 02:42:01,694 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10403d5c0>, 'DELETE FROM card', []) completed
2024-12-13 02:42:01,694 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x1048247c0>)
2024-12-13 02:42:01,694 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x1048247c0>) completed
2024-12-13 02:42:01,694 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x1048247c0>)
2024-12-13 02:42:01,694 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x1048247c0>) completed
2024-12-13 02:42:01,694 - mcard.application.card_provisioning_app - DEBUG - CardProvisioningApp initialized with store and hashing service.
2024-12-13 02:42:01,694 - mcard.application.card_provisioning_app - DEBUG - CardProvisioningApp initialized with store and hashing service.
2024-12-13 02:42:01,695 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10466be20>)
2024-12-13 02:42:01,695 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10466be20>) completed
2024-12-13 02:42:01,695 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10403e5c0>, 'DELETE FROM card', [])
2024-12-13 02:42:01,695 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10403e5c0>, 'DELETE FROM card', []) completed
2024-12-13 02:42:01,695 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10466be20>)
2024-12-13 02:42:01,695 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10466be20>) completed
2024-12-13 02:42:01,695 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10403e5c0>)
2024-12-13 02:42:01,695 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10403e5c0>) completed
2024-12-13 02:42:01,696 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 1 - 2024-12-13T02:42:01.696215
2024-12-13 02:42:01,696 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10466be20>)
2024-12-13 02:42:01,696 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10466be20>) completed
2024-12-13 02:42:01,696 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10403f6c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('4788d19da9774cfc52a00e47a2d340c4',))
2024-12-13 02:42:01,696 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10403f6c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('4788d19da9774cfc52a00e47a2d340c4',)) completed
2024-12-13 02:42:01,696 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x10403f6c0>)
2024-12-13 02:42:01,696 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x10403f6c0>) completed
2024-12-13 02:42:01,696 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10403f6c0>)
2024-12-13 02:42:01,696 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10403f6c0>) completed
2024-12-13 02:42:01,696 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: 4788d19da9774cfc52a00e47a2d340c4 to database
2024-12-13 02:42:01,696 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10466be20>)
2024-12-13 02:42:01,696 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10466be20>) completed
2024-12-13 02:42:01,697 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10435ff40>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('4788d19da9774cfc52a00e47a2d340c4', 'Persistent Test Card 1 - 2024-12-13T02:42:01.696215', '2024-12-12T18:42:01.696665+00:00'))
2024-12-13 02:42:01,697 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10435ff40>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('4788d19da9774cfc52a00e47a2d340c4', 'Persistent Test Card 1 - 2024-12-13T02:42:01.696215', '2024-12-12T18:42:01.696665+00:00')) completed
2024-12-13 02:42:01,697 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10466be20>)
2024-12-13 02:42:01,697 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10466be20>) completed
2024-12-13 02:42:01,697 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: 4788d19da9774cfc52a00e47a2d340c4 to database
2024-12-13 02:42:01,697 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10435ff40>)
2024-12-13 02:42:01,697 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10435ff40>) completed
2024-12-13 02:42:01,697 - test_mcard_api_persistent - DEBUG - Created card with hash: 4788d19da9774cfc52a00e47a2d340c4
2024-12-13 02:42:01,697 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 2 - 2024-12-13T02:42:01.696220
2024-12-13 02:42:01,697 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10466be20>)
2024-12-13 02:42:01,697 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10466be20>) completed
2024-12-13 02:42:01,697 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10435f6c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('c1895344f448f71a617b2d12fc0e2da2',))
2024-12-13 02:42:01,697 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10435f6c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('c1895344f448f71a617b2d12fc0e2da2',)) completed
2024-12-13 02:42:01,697 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x10435f6c0>)
2024-12-13 02:42:01,697 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x10435f6c0>) completed
2024-12-13 02:42:01,697 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10435f6c0>)
2024-12-13 02:42:01,697 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10435f6c0>) completed
2024-12-13 02:42:01,697 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: c1895344f448f71a617b2d12fc0e2da2 to database
2024-12-13 02:42:01,697 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10466be20>)
2024-12-13 02:42:01,697 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10466be20>) completed
2024-12-13 02:42:01,697 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1040f72c0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('c1895344f448f71a617b2d12fc0e2da2', 'Persistent Test Card 2 - 2024-12-13T02:42:01.696220', '2024-12-12T18:42:01.697840+00:00'))
2024-12-13 02:42:01,698 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1040f72c0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('c1895344f448f71a617b2d12fc0e2da2', 'Persistent Test Card 2 - 2024-12-13T02:42:01.696220', '2024-12-12T18:42:01.697840+00:00')) completed
2024-12-13 02:42:01,698 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10466be20>)
2024-12-13 02:42:01,698 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10466be20>) completed
2024-12-13 02:42:01,698 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: c1895344f448f71a617b2d12fc0e2da2 to database
2024-12-13 02:42:01,698 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x1040f72c0>)
2024-12-13 02:42:01,698 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x1040f72c0>) completed
2024-12-13 02:42:01,698 - test_mcard_api_persistent - DEBUG - Created card with hash: c1895344f448f71a617b2d12fc0e2da2
2024-12-13 02:42:01,698 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 3 - 2024-12-13T02:42:01.696221
2024-12-13 02:42:01,698 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10466be20>)
2024-12-13 02:42:01,698 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10466be20>) completed
2024-12-13 02:42:01,698 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1040f4740>, 'SELECT content, g_time FROM card WHERE hash = ?', ('5d7d06c0a10939412373e8c1041d35fa',))
2024-12-13 02:42:01,698 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1040f4740>, 'SELECT content, g_time FROM card WHERE hash = ?', ('5d7d06c0a10939412373e8c1041d35fa',)) completed
2024-12-13 02:42:01,698 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x1040f4740>)
2024-12-13 02:42:01,698 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x1040f4740>) completed
2024-12-13 02:42:01,698 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x1040f4740>)
2024-12-13 02:42:01,698 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x1040f4740>) completed
2024-12-13 02:42:01,698 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: 5d7d06c0a10939412373e8c1041d35fa to database
2024-12-13 02:42:01,698 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10466be20>)
2024-12-13 02:42:01,698 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10466be20>) completed
2024-12-13 02:42:01,698 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x102fa9d40>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('5d7d06c0a10939412373e8c1041d35fa', 'Persistent Test Card 3 - 2024-12-13T02:42:01.696221', '2024-12-12T18:42:01.698625+00:00'))
2024-12-13 02:42:01,698 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x102fa9d40>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('5d7d06c0a10939412373e8c1041d35fa', 'Persistent Test Card 3 - 2024-12-13T02:42:01.696221', '2024-12-12T18:42:01.698625+00:00')) completed
2024-12-13 02:42:01,698 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10466be20>)
2024-12-13 02:42:01,698 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10466be20>) completed
2024-12-13 02:42:01,698 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: 5d7d06c0a10939412373e8c1041d35fa to database
2024-12-13 02:42:01,698 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x102fa9d40>)
2024-12-13 02:42:01,698 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x102fa9d40>) completed
2024-12-13 02:42:01,699 - test_mcard_api_persistent - DEBUG - Created card with hash: 5d7d06c0a10939412373e8c1041d35fa
2024-12-13 02:42:01,699 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10466be20>)
2024-12-13 02:42:01,699 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10466be20>) completed
2024-12-13 02:42:01,699 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x102faa4c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('4788d19da9774cfc52a00e47a2d340c4',))
2024-12-13 02:42:01,699 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x102faa4c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('4788d19da9774cfc52a00e47a2d340c4',)) completed
2024-12-13 02:42:01,699 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x102faa4c0>)
2024-12-13 02:42:01,699 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x102faa4c0>) completed
2024-12-13 02:42:01,699 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x102faa4c0>)
2024-12-13 02:42:01,699 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x102faa4c0>) completed
2024-12-13 02:42:01,699 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: 4788d19da9774cfc52a00e47a2d340c4
2024-12-13 02:42:01,699 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10466be20>)
2024-12-13 02:42:01,699 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10466be20>) completed
2024-12-13 02:42:01,699 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x102faa440>, 'SELECT content, g_time FROM card WHERE hash = ?', ('c1895344f448f71a617b2d12fc0e2da2',))
2024-12-13 02:42:01,699 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x102faa440>, 'SELECT content, g_time FROM card WHERE hash = ?', ('c1895344f448f71a617b2d12fc0e2da2',)) completed
2024-12-13 02:42:01,699 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x102faa440>)
2024-12-13 02:42:01,699 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x102faa440>) completed
2024-12-13 02:42:01,699 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x102faa440>)
2024-12-13 02:42:01,699 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x102faa440>) completed
2024-12-13 02:42:01,699 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: c1895344f448f71a617b2d12fc0e2da2
2024-12-13 02:42:01,699 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10466be20>)
2024-12-13 02:42:01,699 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10466be20>) completed
2024-12-13 02:42:01,699 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x102fa9fc0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('5d7d06c0a10939412373e8c1041d35fa',))
2024-12-13 02:42:01,699 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x102fa9fc0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('5d7d06c0a10939412373e8c1041d35fa',)) completed
2024-12-13 02:42:01,699 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x102fa9fc0>)
2024-12-13 02:42:01,699 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x102fa9fc0>) completed
2024-12-13 02:42:01,699 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x102fa9fc0>)
2024-12-13 02:42:01,699 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x102fa9fc0>) completed
2024-12-13 02:42:01,699 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: 5d7d06c0a10939412373e8c1041d35fa
2024-12-13 02:42:01,700 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10466be20>)
2024-12-13 02:42:01,700 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10466be20>) completed
2024-12-13 02:42:01,700 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x102fa9ec0>, 'SELECT hash, content, g_time FROM card WHERE 1=1 ORDER BY g_time DESC', [])
2024-12-13 02:42:01,700 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x102fa9ec0>, 'SELECT hash, content, g_time FROM card WHERE 1=1 ORDER BY g_time DESC', []) completed
2024-12-13 02:42:01,700 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x102fa9ec0>)
2024-12-13 02:42:01,700 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x102fa9ec0>) completed
2024-12-13 02:42:01,700 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x102fa9ec0>)
2024-12-13 02:42:01,700 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x102fa9ec0>) completed
2024-12-13 02:42:01,700 - test_mcard_api_persistent - DEBUG - Verifying database contents in ./tests/data/test_mcard.db
2024-12-13 02:42:01,700 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x103fb8c20>
2024-12-13 02:42:01,700 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x103fb8c20> completed
2024-12-13 02:42:01,700 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x1048253f0>, 'SELECT hash, content FROM card', [])
2024-12-13 02:42:01,700 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x1048253f0>, 'SELECT hash, content FROM card', []) completed
2024-12-13 02:42:01,700 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x102faa040>)
2024-12-13 02:42:01,700 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x102faa040>) completed
2024-12-13 02:42:01,700 - test_mcard_api_persistent - DEBUG - 
Database Contents:
2024-12-13 02:42:01,701 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x102faa040>)
2024-12-13 02:42:01,701 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x102faa040>) completed
2024-12-13 02:42:01,701 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x1048253f0>)
2024-12-13 02:42:01,701 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x1048253f0>) completed
2024-12-13 02:42:01,728 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:42:09,856 - mcard.application.card_provisioning_app - DEBUG - Logging system initialized.
2024-12-13 02:42:09,856 - mcard.application.card_provisioning_app - DEBUG - Logging system initialized.
2024-12-13 02:42:10,012 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:42:10,012 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:42:10,013 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Initializing SQLite database at ./data/ROOT_mcard_DOT_ENV.db
2024-12-13 02:42:10,013 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x11ac89b20>
2024-12-13 02:42:10,013 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x11ac89b20> completed
2024-12-13 02:42:10,013 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x11c610a90>, 'PRAGMA journal_mode=WAL', [])
2024-12-13 02:42:10,013 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x11c610a90>, 'PRAGMA journal_mode=WAL', []) completed
2024-12-13 02:42:10,014 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x11c610a90>, 'PRAGMA synchronous=NORMAL', [])
2024-12-13 02:42:10,014 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x11c610a90>, 'PRAGMA synchronous=NORMAL', []) completed
2024-12-13 02:42:10,014 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x11c610a90>, 'PRAGMA foreign_keys=ON', [])
2024-12-13 02:42:10,014 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x11c610a90>, 'PRAGMA foreign_keys=ON', []) completed
2024-12-13 02:42:10,014 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x11c610a90>, 'PRAGMA busy_timeout=30.0', [])
2024-12-13 02:42:10,014 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x11c610a90>, 'PRAGMA busy_timeout=30.0', []) completed
2024-12-13 02:42:10,014 - mcard.infrastructure.persistence.schema - DEBUG - Starting SQLite schema initialization for tables: ['card']
2024-12-13 02:42:10,014 - mcard.infrastructure.persistence.schema - DEBUG - Processing table: card
2024-12-13 02:42:10,014 - mcard.infrastructure.persistence.schema - DEBUG - Table creation SQL: CREATE TABLE IF NOT EXISTS card (
id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
hash TEXT NOT NULL UNIQUE,
content TEXT NOT NULL,
g_time TEXT NOT NULL,
metadata TEXT
)
2024-12-13 02:42:10,014 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x11c610a90>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', [])
2024-12-13 02:42:10,014 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x11c610a90>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', []) completed
2024-12-13 02:42:10,014 - mcard.infrastructure.persistence.schema - INFO - Initialized table card in SQLite database
2024-12-13 02:42:10,014 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)
2024-12-13 02:42:10,014 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x11c610a90>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', [])
2024-12-13 02:42:10,014 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x11c610a90>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', []) completed
2024-12-13 02:42:10,014 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_g_time
2024-12-13 02:42:10,014 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)
2024-12-13 02:42:10,014 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x11c610a90>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', [])
2024-12-13 02:42:10,014 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x11c610a90>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', []) completed
2024-12-13 02:42:10,014 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_hash
2024-12-13 02:42:10,014 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x11c610a90>)
2024-12-13 02:42:10,015 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x11c610a90>) completed
2024-12-13 02:42:10,015 - mcard.infrastructure.persistence.schema - INFO - SQLite schema initialization completed successfully
2024-12-13 02:42:10,015 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x11c610a90>)
2024-12-13 02:42:10,015 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x11c610a90>) completed
2024-12-13 02:42:10,015 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x11ac89440>
2024-12-13 02:42:10,015 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x11ac89440> completed
2024-12-13 02:42:10,015 - mcard.infrastructure.persistence.schema - DEBUG - Starting SQLite schema initialization for tables: ['card']
2024-12-13 02:42:10,015 - mcard.infrastructure.persistence.schema - DEBUG - Processing table: card
2024-12-13 02:42:10,015 - mcard.infrastructure.persistence.schema - DEBUG - Table creation SQL: CREATE TABLE IF NOT EXISTS card (
id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
hash TEXT NOT NULL UNIQUE,
content TEXT NOT NULL,
g_time TEXT NOT NULL,
metadata TEXT
)
2024-12-13 02:42:10,015 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x11c611990>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', [])
2024-12-13 02:42:10,015 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x11c611990>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', []) completed
2024-12-13 02:42:10,015 - mcard.infrastructure.persistence.schema - INFO - Initialized table card in SQLite database
2024-12-13 02:42:10,015 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)
2024-12-13 02:42:10,015 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x11c611990>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', [])
2024-12-13 02:42:10,015 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x11c611990>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', []) completed
2024-12-13 02:42:10,015 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_g_time
2024-12-13 02:42:10,015 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)
2024-12-13 02:42:10,015 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x11c611990>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', [])
2024-12-13 02:42:10,015 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x11c611990>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', []) completed
2024-12-13 02:42:10,015 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_hash
2024-12-13 02:42:10,016 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x11c611990>)
2024-12-13 02:42:10,016 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x11c611990>) completed
2024-12-13 02:42:10,016 - mcard.infrastructure.persistence.schema - INFO - SQLite schema initialization completed successfully
2024-12-13 02:42:10,016 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11c611990>)
2024-12-13 02:42:10,016 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11c611990>) completed
2024-12-13 02:42:10,016 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x11ac61540>, 'DELETE FROM card', [])
2024-12-13 02:42:10,016 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x11ac61540>, 'DELETE FROM card', []) completed
2024-12-13 02:42:10,016 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x11c611990>)
2024-12-13 02:42:10,016 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x11c611990>) completed
2024-12-13 02:42:10,017 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x11c611990>)
2024-12-13 02:42:10,017 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x11c611990>) completed
2024-12-13 02:42:10,017 - mcard.application.card_provisioning_app - DEBUG - CardProvisioningApp initialized with store and hashing service.
2024-12-13 02:42:10,017 - mcard.application.card_provisioning_app - DEBUG - CardProvisioningApp initialized with store and hashing service.
2024-12-13 02:42:10,017 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11c610a90>)
2024-12-13 02:42:10,017 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11c610a90>) completed
2024-12-13 02:42:10,017 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x11ab3a040>, 'DELETE FROM card', [])
2024-12-13 02:42:10,017 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x11ab3a040>, 'DELETE FROM card', []) completed
2024-12-13 02:42:10,017 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x11c610a90>)
2024-12-13 02:42:10,017 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x11c610a90>) completed
2024-12-13 02:42:10,017 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x11ab3a040>)
2024-12-13 02:42:10,017 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x11ab3a040>) completed
2024-12-13 02:42:10,018 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 1 - 2024-12-13T02:42:10.018386
2024-12-13 02:42:10,018 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11c610a90>)
2024-12-13 02:42:10,018 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11c610a90>) completed
2024-12-13 02:42:10,018 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x11ab3b040>, 'SELECT content, g_time FROM card WHERE hash = ?', ('c63bb50a3b76f3fb4406e4366650edc9',))
2024-12-13 02:42:10,018 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x11ab3b040>, 'SELECT content, g_time FROM card WHERE hash = ?', ('c63bb50a3b76f3fb4406e4366650edc9',)) completed
2024-12-13 02:42:10,018 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x11ab3b040>)
2024-12-13 02:42:10,018 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x11ab3b040>) completed
2024-12-13 02:42:10,019 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x11ab3b040>)
2024-12-13 02:42:10,019 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x11ab3b040>) completed
2024-12-13 02:42:10,019 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: c63bb50a3b76f3fb4406e4366650edc9 to database
2024-12-13 02:42:10,019 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11c610a90>)
2024-12-13 02:42:10,019 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11c610a90>) completed
2024-12-13 02:42:10,019 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x11abb5a40>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('c63bb50a3b76f3fb4406e4366650edc9', 'Persistent Test Card 1 - 2024-12-13T02:42:10.018386', '2024-12-12T18:42:10.019168+00:00'))
2024-12-13 02:42:10,019 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x11abb5a40>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('c63bb50a3b76f3fb4406e4366650edc9', 'Persistent Test Card 1 - 2024-12-13T02:42:10.018386', '2024-12-12T18:42:10.019168+00:00')) completed
2024-12-13 02:42:10,019 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x11c610a90>)
2024-12-13 02:42:10,019 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x11c610a90>) completed
2024-12-13 02:42:10,019 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: c63bb50a3b76f3fb4406e4366650edc9 to database
2024-12-13 02:42:10,019 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x11abb5a40>)
2024-12-13 02:42:10,019 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x11abb5a40>) completed
2024-12-13 02:42:10,020 - test_mcard_api_persistent - DEBUG - Created card with hash: c63bb50a3b76f3fb4406e4366650edc9
2024-12-13 02:42:10,020 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 2 - 2024-12-13T02:42:10.018391
2024-12-13 02:42:10,020 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11c610a90>)
2024-12-13 02:42:10,020 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11c610a90>) completed
2024-12-13 02:42:10,020 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x11abb5240>, 'SELECT content, g_time FROM card WHERE hash = ?', ('f764843ab3e5d65feb8458ce31684443',))
2024-12-13 02:42:10,020 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x11abb5240>, 'SELECT content, g_time FROM card WHERE hash = ?', ('f764843ab3e5d65feb8458ce31684443',)) completed
2024-12-13 02:42:10,020 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x11abb5240>)
2024-12-13 02:42:10,020 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x11abb5240>) completed
2024-12-13 02:42:10,020 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x11abb5240>)
2024-12-13 02:42:10,020 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x11abb5240>) completed
2024-12-13 02:42:10,020 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: f764843ab3e5d65feb8458ce31684443 to database
2024-12-13 02:42:10,020 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11c610a90>)
2024-12-13 02:42:10,020 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11c610a90>) completed
2024-12-13 02:42:10,020 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x11abb4140>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('f764843ab3e5d65feb8458ce31684443', 'Persistent Test Card 2 - 2024-12-13T02:42:10.018391', '2024-12-12T18:42:10.020692+00:00'))
2024-12-13 02:42:10,021 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x11abb4140>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('f764843ab3e5d65feb8458ce31684443', 'Persistent Test Card 2 - 2024-12-13T02:42:10.018391', '2024-12-12T18:42:10.020692+00:00')) completed
2024-12-13 02:42:10,021 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x11c610a90>)
2024-12-13 02:42:10,021 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x11c610a90>) completed
2024-12-13 02:42:10,021 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: f764843ab3e5d65feb8458ce31684443 to database
2024-12-13 02:42:10,021 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x11abb4140>)
2024-12-13 02:42:10,021 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x11abb4140>) completed
2024-12-13 02:42:10,021 - test_mcard_api_persistent - DEBUG - Created card with hash: f764843ab3e5d65feb8458ce31684443
2024-12-13 02:42:10,021 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 3 - 2024-12-13T02:42:10.018393
2024-12-13 02:42:10,021 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11c610a90>)
2024-12-13 02:42:10,021 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11c610a90>) completed
2024-12-13 02:42:10,021 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x11abb40c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('33b85a87d22cd25153412becfd6acf53',))
2024-12-13 02:42:10,021 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x11abb40c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('33b85a87d22cd25153412becfd6acf53',)) completed
2024-12-13 02:42:10,021 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x11abb40c0>)
2024-12-13 02:42:10,021 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x11abb40c0>) completed
2024-12-13 02:42:10,021 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x11abb40c0>)
2024-12-13 02:42:10,021 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x11abb40c0>) completed
2024-12-13 02:42:10,021 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: 33b85a87d22cd25153412becfd6acf53 to database
2024-12-13 02:42:10,021 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11c610a90>)
2024-12-13 02:42:10,021 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11c610a90>) completed
2024-12-13 02:42:10,021 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x11abb4240>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('33b85a87d22cd25153412becfd6acf53', 'Persistent Test Card 3 - 2024-12-13T02:42:10.018393', '2024-12-12T18:42:10.021844+00:00'))
2024-12-13 02:42:10,022 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x11abb4240>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('33b85a87d22cd25153412becfd6acf53', 'Persistent Test Card 3 - 2024-12-13T02:42:10.018393', '2024-12-12T18:42:10.021844+00:00')) completed
2024-12-13 02:42:10,022 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x11c610a90>)
2024-12-13 02:42:10,022 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x11c610a90>) completed
2024-12-13 02:42:10,022 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: 33b85a87d22cd25153412becfd6acf53 to database
2024-12-13 02:42:10,022 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x11abb4240>)
2024-12-13 02:42:10,022 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x11abb4240>) completed
2024-12-13 02:42:10,022 - test_mcard_api_persistent - DEBUG - Created card with hash: 33b85a87d22cd25153412becfd6acf53
2024-12-13 02:42:10,022 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11c610a90>)
2024-12-13 02:42:10,022 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11c610a90>) completed
2024-12-13 02:42:10,022 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x11abb4440>, 'SELECT content, g_time FROM card WHERE hash = ?', ('c63bb50a3b76f3fb4406e4366650edc9',))
2024-12-13 02:42:10,022 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x11abb4440>, 'SELECT content, g_time FROM card WHERE hash = ?', ('c63bb50a3b76f3fb4406e4366650edc9',)) completed
2024-12-13 02:42:10,022 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x11abb4440>)
2024-12-13 02:42:10,022 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x11abb4440>) completed
2024-12-13 02:42:10,022 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x11abb4440>)
2024-12-13 02:42:10,022 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x11abb4440>) completed
2024-12-13 02:42:10,022 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: c63bb50a3b76f3fb4406e4366650edc9
2024-12-13 02:42:10,022 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11c610a90>)
2024-12-13 02:42:10,022 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11c610a90>) completed
2024-12-13 02:42:10,022 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x11abb44c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('f764843ab3e5d65feb8458ce31684443',))
2024-12-13 02:42:10,023 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x11abb44c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('f764843ab3e5d65feb8458ce31684443',)) completed
2024-12-13 02:42:10,023 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x11abb44c0>)
2024-12-13 02:42:10,023 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x11abb44c0>) completed
2024-12-13 02:42:10,023 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x11abb44c0>)
2024-12-13 02:42:10,023 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x11abb44c0>) completed
2024-12-13 02:42:10,023 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: f764843ab3e5d65feb8458ce31684443
2024-12-13 02:42:10,023 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11c610a90>)
2024-12-13 02:42:10,023 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11c610a90>) completed
2024-12-13 02:42:10,023 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x11abb4f40>, 'SELECT content, g_time FROM card WHERE hash = ?', ('33b85a87d22cd25153412becfd6acf53',))
2024-12-13 02:42:10,023 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x11abb4f40>, 'SELECT content, g_time FROM card WHERE hash = ?', ('33b85a87d22cd25153412becfd6acf53',)) completed
2024-12-13 02:42:10,023 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x11abb4f40>)
2024-12-13 02:42:10,023 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x11abb4f40>) completed
2024-12-13 02:42:10,023 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x11abb4f40>)
2024-12-13 02:42:10,023 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x11abb4f40>) completed
2024-12-13 02:42:10,023 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: 33b85a87d22cd25153412becfd6acf53
2024-12-13 02:42:10,023 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11c610a90>)
2024-12-13 02:42:10,023 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x11c610a90>) completed
2024-12-13 02:42:10,023 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x11ab39cc0>, 'SELECT hash, content, g_time FROM card WHERE 1=1 ORDER BY g_time DESC', [])
2024-12-13 02:42:10,024 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x11ab39cc0>, 'SELECT hash, content, g_time FROM card WHERE 1=1 ORDER BY g_time DESC', []) completed
2024-12-13 02:42:10,024 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x11ab39cc0>)
2024-12-13 02:42:10,024 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x11ab39cc0>) completed
2024-12-13 02:42:10,024 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x11ab39cc0>)
2024-12-13 02:42:10,024 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x11ab39cc0>) completed
2024-12-13 02:42:10,024 - test_mcard_api_persistent - DEBUG - Verifying database contents in ./tests/data/test_mcard.db
2024-12-13 02:42:10,024 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x11ac8a3e0>
2024-12-13 02:42:10,024 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x11ac8a3e0> completed
2024-12-13 02:42:10,024 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x11c6127a0>, 'SELECT hash, content FROM card', [])
2024-12-13 02:42:10,024 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x11c6127a0>, 'SELECT hash, content FROM card', []) completed
2024-12-13 02:42:10,024 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x11acf65c0>)
2024-12-13 02:42:10,024 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x11acf65c0>) completed
2024-12-13 02:42:10,024 - test_mcard_api_persistent - DEBUG - 
Database Contents:
2024-12-13 02:42:10,025 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x11acf65c0>)
2024-12-13 02:42:10,025 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x11acf65c0>) completed
2024-12-13 02:42:10,025 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x11c6127a0>)
2024-12-13 02:42:10,025 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x11c6127a0>) completed
2024-12-13 02:42:10,047 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:43:15,217 - mcard.application.card_provisioning_app - DEBUG - Logging system initialized.
2024-12-13 02:43:15,217 - mcard.application.card_provisioning_app - DEBUG - Logging system initialized.
2024-12-13 02:43:15,403 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:43:15,403 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:43:15,404 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Initializing SQLite database at ./data/ROOT_mcard_DOT_ENV.db
2024-12-13 02:43:15,404 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x1053e0720>
2024-12-13 02:43:15,404 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x1053e0720> completed
2024-12-13 02:43:15,405 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x105347e20>, 'PRAGMA journal_mode=WAL', [])
2024-12-13 02:43:15,405 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x105347e20>, 'PRAGMA journal_mode=WAL', []) completed
2024-12-13 02:43:15,405 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x105347e20>, 'PRAGMA synchronous=NORMAL', [])
2024-12-13 02:43:15,405 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x105347e20>, 'PRAGMA synchronous=NORMAL', []) completed
2024-12-13 02:43:15,405 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x105347e20>, 'PRAGMA foreign_keys=ON', [])
2024-12-13 02:43:15,406 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x105347e20>, 'PRAGMA foreign_keys=ON', []) completed
2024-12-13 02:43:15,406 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x105347e20>, 'PRAGMA busy_timeout=30.0', [])
2024-12-13 02:43:15,406 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x105347e20>, 'PRAGMA busy_timeout=30.0', []) completed
2024-12-13 02:43:15,406 - mcard.infrastructure.persistence.schema - DEBUG - Starting SQLite schema initialization for tables: ['card']
2024-12-13 02:43:15,406 - mcard.infrastructure.persistence.schema - DEBUG - Processing table: card
2024-12-13 02:43:15,406 - mcard.infrastructure.persistence.schema - DEBUG - Table creation SQL: CREATE TABLE IF NOT EXISTS card (
id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
hash TEXT NOT NULL UNIQUE,
content TEXT NOT NULL,
g_time TEXT NOT NULL,
metadata TEXT
)
2024-12-13 02:43:15,406 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x105347e20>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', [])
2024-12-13 02:43:15,406 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x105347e20>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', []) completed
2024-12-13 02:43:15,406 - mcard.infrastructure.persistence.schema - INFO - Initialized table card in SQLite database
2024-12-13 02:43:15,406 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)
2024-12-13 02:43:15,406 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x105347e20>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', [])
2024-12-13 02:43:15,406 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x105347e20>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', []) completed
2024-12-13 02:43:15,406 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_g_time
2024-12-13 02:43:15,406 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)
2024-12-13 02:43:15,406 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x105347e20>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', [])
2024-12-13 02:43:15,406 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x105347e20>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', []) completed
2024-12-13 02:43:15,406 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_hash
2024-12-13 02:43:15,406 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x105347e20>)
2024-12-13 02:43:15,406 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x105347e20>) completed
2024-12-13 02:43:15,406 - mcard.infrastructure.persistence.schema - INFO - SQLite schema initialization completed successfully
2024-12-13 02:43:15,406 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x105347e20>)
2024-12-13 02:43:15,406 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x105347e20>) completed
2024-12-13 02:43:15,407 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x1053e1a80>
2024-12-13 02:43:15,407 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x1053e1a80> completed
2024-12-13 02:43:15,407 - mcard.infrastructure.persistence.schema - DEBUG - Starting SQLite schema initialization for tables: ['card']
2024-12-13 02:43:15,407 - mcard.infrastructure.persistence.schema - DEBUG - Processing table: card
2024-12-13 02:43:15,407 - mcard.infrastructure.persistence.schema - DEBUG - Table creation SQL: CREATE TABLE IF NOT EXISTS card (
id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
hash TEXT NOT NULL UNIQUE,
content TEXT NOT NULL,
g_time TEXT NOT NULL,
metadata TEXT
)
2024-12-13 02:43:15,407 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x1054087c0>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', [])
2024-12-13 02:43:15,407 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x1054087c0>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', []) completed
2024-12-13 02:43:15,407 - mcard.infrastructure.persistence.schema - INFO - Initialized table card in SQLite database
2024-12-13 02:43:15,407 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)
2024-12-13 02:43:15,407 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x1054087c0>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', [])
2024-12-13 02:43:15,407 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x1054087c0>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', []) completed
2024-12-13 02:43:15,407 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_g_time
2024-12-13 02:43:15,407 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)
2024-12-13 02:43:15,407 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x1054087c0>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', [])
2024-12-13 02:43:15,407 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x1054087c0>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', []) completed
2024-12-13 02:43:15,408 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_hash
2024-12-13 02:43:15,408 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x1054087c0>)
2024-12-13 02:43:15,408 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x1054087c0>) completed
2024-12-13 02:43:15,408 - mcard.infrastructure.persistence.schema - INFO - SQLite schema initialization completed successfully
2024-12-13 02:43:15,408 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1054087c0>)
2024-12-13 02:43:15,408 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x1054087c0>) completed
2024-12-13 02:43:15,408 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104b87240>, 'DELETE FROM card', [])
2024-12-13 02:43:15,408 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104b87240>, 'DELETE FROM card', []) completed
2024-12-13 02:43:15,408 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x1054087c0>)
2024-12-13 02:43:15,408 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x1054087c0>) completed
2024-12-13 02:43:15,408 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x1054087c0>)
2024-12-13 02:43:15,408 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x1054087c0>) completed
2024-12-13 02:43:15,408 - mcard.application.card_provisioning_app - DEBUG - CardProvisioningApp initialized with store and hashing service.
2024-12-13 02:43:15,408 - mcard.application.card_provisioning_app - DEBUG - CardProvisioningApp initialized with store and hashing service.
2024-12-13 02:43:15,408 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105347e20>)
2024-12-13 02:43:15,408 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105347e20>) completed
2024-12-13 02:43:15,408 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104f99640>, 'DELETE FROM card', [])
2024-12-13 02:43:15,408 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104f99640>, 'DELETE FROM card', []) completed
2024-12-13 02:43:15,408 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x105347e20>)
2024-12-13 02:43:15,409 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x105347e20>) completed
2024-12-13 02:43:15,409 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x104f99640>)
2024-12-13 02:43:15,409 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x104f99640>) completed
2024-12-13 02:43:15,409 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 1 - 2024-12-13T02:43:15.409339
2024-12-13 02:43:15,409 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105347e20>)
2024-12-13 02:43:15,409 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105347e20>) completed
2024-12-13 02:43:15,409 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104f9a040>, 'SELECT content, g_time FROM card WHERE hash = ?', ('f76d052de658c0d91f06c7676639fd82',))
2024-12-13 02:43:15,409 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104f9a040>, 'SELECT content, g_time FROM card WHERE hash = ?', ('f76d052de658c0d91f06c7676639fd82',)) completed
2024-12-13 02:43:15,409 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x104f9a040>)
2024-12-13 02:43:15,409 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x104f9a040>) completed
2024-12-13 02:43:15,409 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x104f9a040>)
2024-12-13 02:43:15,409 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x104f9a040>) completed
2024-12-13 02:43:15,410 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: f76d052de658c0d91f06c7676639fd82 to database
2024-12-13 02:43:15,410 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105347e20>)
2024-12-13 02:43:15,410 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105347e20>) completed
2024-12-13 02:43:15,410 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104f986c0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('f76d052de658c0d91f06c7676639fd82', 'Persistent Test Card 1 - 2024-12-13T02:43:15.409339', '2024-12-12T18:43:15.409825+00:00'))
2024-12-13 02:43:15,410 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104f986c0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('f76d052de658c0d91f06c7676639fd82', 'Persistent Test Card 1 - 2024-12-13T02:43:15.409339', '2024-12-12T18:43:15.409825+00:00')) completed
2024-12-13 02:43:15,410 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x105347e20>)
2024-12-13 02:43:15,410 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x105347e20>) completed
2024-12-13 02:43:15,410 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: f76d052de658c0d91f06c7676639fd82 to database
2024-12-13 02:43:15,410 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x104f986c0>)
2024-12-13 02:43:15,410 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x104f986c0>) completed
2024-12-13 02:43:15,410 - test_mcard_api_persistent - DEBUG - Created card with hash: f76d052de658c0d91f06c7676639fd82
2024-12-13 02:43:15,410 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 2 - 2024-12-13T02:43:15.409344
2024-12-13 02:43:15,410 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105347e20>)
2024-12-13 02:43:15,410 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105347e20>) completed
2024-12-13 02:43:15,410 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104f9a0c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('f738025fa9b1d119bd28a899a67701b4',))
2024-12-13 02:43:15,410 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104f9a0c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('f738025fa9b1d119bd28a899a67701b4',)) completed
2024-12-13 02:43:15,411 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x104f9a0c0>)
2024-12-13 02:43:15,411 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x104f9a0c0>) completed
2024-12-13 02:43:15,411 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x104f9a0c0>)
2024-12-13 02:43:15,411 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x104f9a0c0>) completed
2024-12-13 02:43:15,411 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: f738025fa9b1d119bd28a899a67701b4 to database
2024-12-13 02:43:15,411 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105347e20>)
2024-12-13 02:43:15,411 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105347e20>) completed
2024-12-13 02:43:15,411 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104f99fc0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('f738025fa9b1d119bd28a899a67701b4', 'Persistent Test Card 2 - 2024-12-13T02:43:15.409344', '2024-12-12T18:43:15.411284+00:00'))
2024-12-13 02:43:15,411 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104f99fc0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('f738025fa9b1d119bd28a899a67701b4', 'Persistent Test Card 2 - 2024-12-13T02:43:15.409344', '2024-12-12T18:43:15.411284+00:00')) completed
2024-12-13 02:43:15,411 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x105347e20>)
2024-12-13 02:43:15,411 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x105347e20>) completed
2024-12-13 02:43:15,412 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: f738025fa9b1d119bd28a899a67701b4 to database
2024-12-13 02:43:15,412 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x104f99fc0>)
2024-12-13 02:43:15,412 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x104f99fc0>) completed
2024-12-13 02:43:15,412 - test_mcard_api_persistent - DEBUG - Created card with hash: f738025fa9b1d119bd28a899a67701b4
2024-12-13 02:43:15,412 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 3 - 2024-12-13T02:43:15.409345
2024-12-13 02:43:15,412 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105347e20>)
2024-12-13 02:43:15,412 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105347e20>) completed
2024-12-13 02:43:15,412 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104f9adc0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('a8fea124e2b03f4d2db57b583736c5fd',))
2024-12-13 02:43:15,412 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104f9adc0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('a8fea124e2b03f4d2db57b583736c5fd',)) completed
2024-12-13 02:43:15,412 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x104f9adc0>)
2024-12-13 02:43:15,412 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x104f9adc0>) completed
2024-12-13 02:43:15,412 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x104f9adc0>)
2024-12-13 02:43:15,412 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x104f9adc0>) completed
2024-12-13 02:43:15,412 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: a8fea124e2b03f4d2db57b583736c5fd to database
2024-12-13 02:43:15,412 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105347e20>)
2024-12-13 02:43:15,412 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105347e20>) completed
2024-12-13 02:43:15,412 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104f98cc0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('a8fea124e2b03f4d2db57b583736c5fd', 'Persistent Test Card 3 - 2024-12-13T02:43:15.409345', '2024-12-12T18:43:15.412691+00:00'))
2024-12-13 02:43:15,412 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104f98cc0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('a8fea124e2b03f4d2db57b583736c5fd', 'Persistent Test Card 3 - 2024-12-13T02:43:15.409345', '2024-12-12T18:43:15.412691+00:00')) completed
2024-12-13 02:43:15,413 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x105347e20>)
2024-12-13 02:43:15,413 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x105347e20>) completed
2024-12-13 02:43:15,413 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: a8fea124e2b03f4d2db57b583736c5fd to database
2024-12-13 02:43:15,413 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x104f98cc0>)
2024-12-13 02:43:15,413 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x104f98cc0>) completed
2024-12-13 02:43:15,413 - test_mcard_api_persistent - DEBUG - Created card with hash: a8fea124e2b03f4d2db57b583736c5fd
2024-12-13 02:43:15,413 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105347e20>)
2024-12-13 02:43:15,413 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105347e20>) completed
2024-12-13 02:43:15,413 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104f9ba40>, 'SELECT content, g_time FROM card WHERE hash = ?', ('f76d052de658c0d91f06c7676639fd82',))
2024-12-13 02:43:15,413 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104f9ba40>, 'SELECT content, g_time FROM card WHERE hash = ?', ('f76d052de658c0d91f06c7676639fd82',)) completed
2024-12-13 02:43:15,413 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x104f9ba40>)
2024-12-13 02:43:15,413 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x104f9ba40>) completed
2024-12-13 02:43:15,413 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x104f9ba40>)
2024-12-13 02:43:15,414 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x104f9ba40>) completed
2024-12-13 02:43:15,414 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: f76d052de658c0d91f06c7676639fd82
2024-12-13 02:43:15,414 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105347e20>)
2024-12-13 02:43:15,414 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105347e20>) completed
2024-12-13 02:43:15,414 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104f99040>, 'SELECT content, g_time FROM card WHERE hash = ?', ('f738025fa9b1d119bd28a899a67701b4',))
2024-12-13 02:43:15,414 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104f99040>, 'SELECT content, g_time FROM card WHERE hash = ?', ('f738025fa9b1d119bd28a899a67701b4',)) completed
2024-12-13 02:43:15,414 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x104f99040>)
2024-12-13 02:43:15,414 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x104f99040>) completed
2024-12-13 02:43:15,414 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x104f99040>)
2024-12-13 02:43:15,414 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x104f99040>) completed
2024-12-13 02:43:15,414 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: f738025fa9b1d119bd28a899a67701b4
2024-12-13 02:43:15,414 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105347e20>)
2024-12-13 02:43:15,414 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105347e20>) completed
2024-12-13 02:43:15,414 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104f9a3c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('a8fea124e2b03f4d2db57b583736c5fd',))
2024-12-13 02:43:15,414 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104f9a3c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('a8fea124e2b03f4d2db57b583736c5fd',)) completed
2024-12-13 02:43:15,414 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x104f9a3c0>)
2024-12-13 02:43:15,414 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x104f9a3c0>) completed
2024-12-13 02:43:15,414 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x104f9a3c0>)
2024-12-13 02:43:15,414 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x104f9a3c0>) completed
2024-12-13 02:43:15,414 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: a8fea124e2b03f4d2db57b583736c5fd
2024-12-13 02:43:15,414 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105347e20>)
2024-12-13 02:43:15,414 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105347e20>) completed
2024-12-13 02:43:15,415 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104f98740>, 'SELECT hash, content, g_time FROM card WHERE 1=1 ORDER BY g_time DESC', [])
2024-12-13 02:43:15,415 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x104f98740>, 'SELECT hash, content, g_time FROM card WHERE 1=1 ORDER BY g_time DESC', []) completed
2024-12-13 02:43:15,415 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x104f98740>)
2024-12-13 02:43:15,415 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x104f98740>) completed
2024-12-13 02:43:15,415 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x104f98740>)
2024-12-13 02:43:15,415 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x104f98740>) completed
2024-12-13 02:43:15,415 - test_mcard_api_persistent - DEBUG - Verifying database contents in ./data/ROOT_mcard_DOT_ENV.db
2024-12-13 02:43:15,415 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x1053e3740>
2024-12-13 02:43:15,415 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x1053e3740> completed
2024-12-13 02:43:15,415 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x1054095d0>, 'SELECT hash, content FROM card', [])
2024-12-13 02:43:15,415 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x1054095d0>, 'SELECT hash, content FROM card', []) completed
2024-12-13 02:43:15,415 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x104f98940>)
2024-12-13 02:43:15,415 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x104f98940>) completed
2024-12-13 02:43:15,415 - test_mcard_api_persistent - DEBUG - 
Database Contents:
2024-12-13 02:43:15,415 - test_mcard_api_persistent - DEBUG - Hash: f76d052de658c0d91f06c7676639fd82, Content: Persistent Test Card 1 - 2024-12-13T02:43:15.409339
2024-12-13 02:43:15,415 - test_mcard_api_persistent - DEBUG - Hash: f738025fa9b1d119bd28a899a67701b4, Content: Persistent Test Card 2 - 2024-12-13T02:43:15.409344
2024-12-13 02:43:15,416 - test_mcard_api_persistent - DEBUG - Hash: a8fea124e2b03f4d2db57b583736c5fd, Content: Persistent Test Card 3 - 2024-12-13T02:43:15.409345
2024-12-13 02:43:15,416 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x104f98940>)
2024-12-13 02:43:15,416 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x104f98940>) completed
2024-12-13 02:43:15,416 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x1054095d0>)
2024-12-13 02:43:15,416 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x1054095d0>) completed
2024-12-13 02:43:15,416 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:43:25,206 - mcard.application.card_provisioning_app - DEBUG - Logging system initialized.
2024-12-13 02:43:25,206 - mcard.application.card_provisioning_app - DEBUG - Logging system initialized.
2024-12-13 02:43:25,416 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:43:25,416 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:43:25,417 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Initializing SQLite database at ./data/ROOT_mcard_DOT_ENV.db
2024-12-13 02:43:25,417 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x105be56c0>
2024-12-13 02:43:25,417 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x105be56c0> completed
2024-12-13 02:43:25,417 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x105bf4a90>, 'PRAGMA journal_mode=WAL', [])
2024-12-13 02:43:25,418 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x105bf4a90>, 'PRAGMA journal_mode=WAL', []) completed
2024-12-13 02:43:25,418 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x105bf4a90>, 'PRAGMA synchronous=NORMAL', [])
2024-12-13 02:43:25,418 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x105bf4a90>, 'PRAGMA synchronous=NORMAL', []) completed
2024-12-13 02:43:25,418 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x105bf4a90>, 'PRAGMA foreign_keys=ON', [])
2024-12-13 02:43:25,418 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x105bf4a90>, 'PRAGMA foreign_keys=ON', []) completed
2024-12-13 02:43:25,418 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x105bf4a90>, 'PRAGMA busy_timeout=30.0', [])
2024-12-13 02:43:25,418 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x105bf4a90>, 'PRAGMA busy_timeout=30.0', []) completed
2024-12-13 02:43:25,418 - mcard.infrastructure.persistence.schema - DEBUG - Starting SQLite schema initialization for tables: ['card']
2024-12-13 02:43:25,418 - mcard.infrastructure.persistence.schema - DEBUG - Processing table: card
2024-12-13 02:43:25,418 - mcard.infrastructure.persistence.schema - DEBUG - Table creation SQL: CREATE TABLE IF NOT EXISTS card (
id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
hash TEXT NOT NULL UNIQUE,
content TEXT NOT NULL,
g_time TEXT NOT NULL,
metadata TEXT
)
2024-12-13 02:43:25,418 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x105bf4a90>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', [])
2024-12-13 02:43:25,418 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x105bf4a90>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', []) completed
2024-12-13 02:43:25,418 - mcard.infrastructure.persistence.schema - INFO - Initialized table card in SQLite database
2024-12-13 02:43:25,418 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)
2024-12-13 02:43:25,418 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x105bf4a90>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', [])
2024-12-13 02:43:25,418 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x105bf4a90>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', []) completed
2024-12-13 02:43:25,419 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_g_time
2024-12-13 02:43:25,419 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)
2024-12-13 02:43:25,419 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x105bf4a90>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', [])
2024-12-13 02:43:25,419 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x105bf4a90>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', []) completed
2024-12-13 02:43:25,419 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_hash
2024-12-13 02:43:25,419 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x105bf4a90>)
2024-12-13 02:43:25,419 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x105bf4a90>) completed
2024-12-13 02:43:25,419 - mcard.infrastructure.persistence.schema - INFO - SQLite schema initialization completed successfully
2024-12-13 02:43:25,419 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x105bf4a90>)
2024-12-13 02:43:25,419 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x105bf4a90>) completed
2024-12-13 02:43:25,419 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x105be51c0>
2024-12-13 02:43:25,419 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x105be51c0> completed
2024-12-13 02:43:25,419 - mcard.infrastructure.persistence.schema - DEBUG - Starting SQLite schema initialization for tables: ['card']
2024-12-13 02:43:25,419 - mcard.infrastructure.persistence.schema - DEBUG - Processing table: card
2024-12-13 02:43:25,419 - mcard.infrastructure.persistence.schema - DEBUG - Table creation SQL: CREATE TABLE IF NOT EXISTS card (
id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
hash TEXT NOT NULL UNIQUE,
content TEXT NOT NULL,
g_time TEXT NOT NULL,
metadata TEXT
)
2024-12-13 02:43:25,419 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x105bf5990>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', [])
2024-12-13 02:43:25,419 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x105bf5990>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', []) completed
2024-12-13 02:43:25,420 - mcard.infrastructure.persistence.schema - INFO - Initialized table card in SQLite database
2024-12-13 02:43:25,420 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)
2024-12-13 02:43:25,420 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x105bf5990>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', [])
2024-12-13 02:43:25,420 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x105bf5990>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', []) completed
2024-12-13 02:43:25,420 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_g_time
2024-12-13 02:43:25,420 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)
2024-12-13 02:43:25,420 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x105bf5990>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', [])
2024-12-13 02:43:25,420 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x105bf5990>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', []) completed
2024-12-13 02:43:25,420 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_hash
2024-12-13 02:43:25,420 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x105bf5990>)
2024-12-13 02:43:25,420 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x105bf5990>) completed
2024-12-13 02:43:25,420 - mcard.infrastructure.persistence.schema - INFO - SQLite schema initialization completed successfully
2024-12-13 02:43:25,420 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105bf5990>)
2024-12-13 02:43:25,420 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105bf5990>) completed
2024-12-13 02:43:25,420 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105285cc0>, 'DELETE FROM card', [])
2024-12-13 02:43:25,420 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105285cc0>, 'DELETE FROM card', []) completed
2024-12-13 02:43:25,420 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x105bf5990>)
2024-12-13 02:43:25,421 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x105bf5990>) completed
2024-12-13 02:43:25,421 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x105bf5990>)
2024-12-13 02:43:25,421 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x105bf5990>) completed
2024-12-13 02:43:25,421 - mcard.application.card_provisioning_app - DEBUG - CardProvisioningApp initialized with store and hashing service.
2024-12-13 02:43:25,421 - mcard.application.card_provisioning_app - DEBUG - CardProvisioningApp initialized with store and hashing service.
2024-12-13 02:43:25,421 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105bf4a90>)
2024-12-13 02:43:25,421 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105bf4a90>) completed
2024-12-13 02:43:25,421 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105285740>, 'DELETE FROM card', [])
2024-12-13 02:43:25,421 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105285740>, 'DELETE FROM card', []) completed
2024-12-13 02:43:25,421 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x105bf4a90>)
2024-12-13 02:43:25,421 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x105bf4a90>) completed
2024-12-13 02:43:25,421 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x105285740>)
2024-12-13 02:43:25,421 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x105285740>) completed
2024-12-13 02:43:25,422 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 1 - 2024-12-13T02:43:25.422214
2024-12-13 02:43:25,422 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105bf4a90>)
2024-12-13 02:43:25,422 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105bf4a90>) completed
2024-12-13 02:43:25,422 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105285bc0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('15a3c683d02eefdb2726a0328821944d',))
2024-12-13 02:43:25,422 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105285bc0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('15a3c683d02eefdb2726a0328821944d',)) completed
2024-12-13 02:43:25,422 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x105285bc0>)
2024-12-13 02:43:25,422 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x105285bc0>) completed
2024-12-13 02:43:25,422 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x105285bc0>)
2024-12-13 02:43:25,422 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x105285bc0>) completed
2024-12-13 02:43:25,422 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: 15a3c683d02eefdb2726a0328821944d to database
2024-12-13 02:43:25,422 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105bf4a90>)
2024-12-13 02:43:25,423 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105bf4a90>) completed
2024-12-13 02:43:25,423 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105284ec0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('15a3c683d02eefdb2726a0328821944d', 'Persistent Test Card 1 - 2024-12-13T02:43:25.422214', '2024-12-12T18:43:25.422724+00:00'))
2024-12-13 02:43:25,423 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105284ec0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('15a3c683d02eefdb2726a0328821944d', 'Persistent Test Card 1 - 2024-12-13T02:43:25.422214', '2024-12-12T18:43:25.422724+00:00')) completed
2024-12-13 02:43:25,423 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x105bf4a90>)
2024-12-13 02:43:25,423 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x105bf4a90>) completed
2024-12-13 02:43:25,423 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: 15a3c683d02eefdb2726a0328821944d to database
2024-12-13 02:43:25,423 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x105284ec0>)
2024-12-13 02:43:25,423 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x105284ec0>) completed
2024-12-13 02:43:25,423 - test_mcard_api_persistent - DEBUG - Created card with hash: 15a3c683d02eefdb2726a0328821944d
2024-12-13 02:43:25,423 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 2 - 2024-12-13T02:43:25.422218
2024-12-13 02:43:25,423 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105bf4a90>)
2024-12-13 02:43:25,424 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105bf4a90>) completed
2024-12-13 02:43:25,424 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1052849c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('24ab40ea15e3771e0835e2a6fd86af05',))
2024-12-13 02:43:25,424 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1052849c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('24ab40ea15e3771e0835e2a6fd86af05',)) completed
2024-12-13 02:43:25,424 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x1052849c0>)
2024-12-13 02:43:25,424 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x1052849c0>) completed
2024-12-13 02:43:25,424 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x1052849c0>)
2024-12-13 02:43:25,424 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x1052849c0>) completed
2024-12-13 02:43:25,424 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: 24ab40ea15e3771e0835e2a6fd86af05 to database
2024-12-13 02:43:25,424 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105bf4a90>)
2024-12-13 02:43:25,424 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105bf4a90>) completed
2024-12-13 02:43:25,424 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1052847c0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('24ab40ea15e3771e0835e2a6fd86af05', 'Persistent Test Card 2 - 2024-12-13T02:43:25.422218', '2024-12-12T18:43:25.424489+00:00'))
2024-12-13 02:43:25,424 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1052847c0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('24ab40ea15e3771e0835e2a6fd86af05', 'Persistent Test Card 2 - 2024-12-13T02:43:25.422218', '2024-12-12T18:43:25.424489+00:00')) completed
2024-12-13 02:43:25,424 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x105bf4a90>)
2024-12-13 02:43:25,424 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x105bf4a90>) completed
2024-12-13 02:43:25,424 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: 24ab40ea15e3771e0835e2a6fd86af05 to database
2024-12-13 02:43:25,424 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x1052847c0>)
2024-12-13 02:43:25,425 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x1052847c0>) completed
2024-12-13 02:43:25,425 - test_mcard_api_persistent - DEBUG - Created card with hash: 24ab40ea15e3771e0835e2a6fd86af05
2024-12-13 02:43:25,425 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 3 - 2024-12-13T02:43:25.422220
2024-12-13 02:43:25,425 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105bf4a90>)
2024-12-13 02:43:25,425 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105bf4a90>) completed
2024-12-13 02:43:25,425 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105284f40>, 'SELECT content, g_time FROM card WHERE hash = ?', ('d8de4955eb22c0cf7135d585877ce99f',))
2024-12-13 02:43:25,425 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105284f40>, 'SELECT content, g_time FROM card WHERE hash = ?', ('d8de4955eb22c0cf7135d585877ce99f',)) completed
2024-12-13 02:43:25,425 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x105284f40>)
2024-12-13 02:43:25,425 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x105284f40>) completed
2024-12-13 02:43:25,425 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x105284f40>)
2024-12-13 02:43:25,425 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x105284f40>) completed
2024-12-13 02:43:25,425 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: d8de4955eb22c0cf7135d585877ce99f to database
2024-12-13 02:43:25,425 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105bf4a90>)
2024-12-13 02:43:25,425 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105bf4a90>) completed
2024-12-13 02:43:25,425 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105286040>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('d8de4955eb22c0cf7135d585877ce99f', 'Persistent Test Card 3 - 2024-12-13T02:43:25.422220', '2024-12-12T18:43:25.425497+00:00'))
2024-12-13 02:43:25,425 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105286040>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('d8de4955eb22c0cf7135d585877ce99f', 'Persistent Test Card 3 - 2024-12-13T02:43:25.422220', '2024-12-12T18:43:25.425497+00:00')) completed
2024-12-13 02:43:25,425 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x105bf4a90>)
2024-12-13 02:43:25,425 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x105bf4a90>) completed
2024-12-13 02:43:25,426 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: d8de4955eb22c0cf7135d585877ce99f to database
2024-12-13 02:43:25,426 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x105286040>)
2024-12-13 02:43:25,426 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x105286040>) completed
2024-12-13 02:43:25,426 - test_mcard_api_persistent - DEBUG - Created card with hash: d8de4955eb22c0cf7135d585877ce99f
2024-12-13 02:43:25,426 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105bf4a90>)
2024-12-13 02:43:25,426 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105bf4a90>) completed
2024-12-13 02:43:25,426 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105285b40>, 'SELECT content, g_time FROM card WHERE hash = ?', ('15a3c683d02eefdb2726a0328821944d',))
2024-12-13 02:43:25,426 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105285b40>, 'SELECT content, g_time FROM card WHERE hash = ?', ('15a3c683d02eefdb2726a0328821944d',)) completed
2024-12-13 02:43:25,426 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x105285b40>)
2024-12-13 02:43:25,426 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x105285b40>) completed
2024-12-13 02:43:25,426 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x105285b40>)
2024-12-13 02:43:25,426 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x105285b40>) completed
2024-12-13 02:43:25,426 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: 15a3c683d02eefdb2726a0328821944d
2024-12-13 02:43:25,426 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105bf4a90>)
2024-12-13 02:43:25,426 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105bf4a90>) completed
2024-12-13 02:43:25,426 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1052b53c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('24ab40ea15e3771e0835e2a6fd86af05',))
2024-12-13 02:43:25,426 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x1052b53c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('24ab40ea15e3771e0835e2a6fd86af05',)) completed
2024-12-13 02:43:25,426 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x1052b53c0>)
2024-12-13 02:43:25,426 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x1052b53c0>) completed
2024-12-13 02:43:25,427 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x1052b53c0>)
2024-12-13 02:43:25,427 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x1052b53c0>) completed
2024-12-13 02:43:25,427 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: 24ab40ea15e3771e0835e2a6fd86af05
2024-12-13 02:43:25,427 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105bf4a90>)
2024-12-13 02:43:25,427 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105bf4a90>) completed
2024-12-13 02:43:25,427 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10546a640>, 'SELECT content, g_time FROM card WHERE hash = ?', ('d8de4955eb22c0cf7135d585877ce99f',))
2024-12-13 02:43:25,427 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10546a640>, 'SELECT content, g_time FROM card WHERE hash = ?', ('d8de4955eb22c0cf7135d585877ce99f',)) completed
2024-12-13 02:43:25,427 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x10546a640>)
2024-12-13 02:43:25,427 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x10546a640>) completed
2024-12-13 02:43:25,427 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10546a640>)
2024-12-13 02:43:25,427 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10546a640>) completed
2024-12-13 02:43:25,427 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: d8de4955eb22c0cf7135d585877ce99f
2024-12-13 02:43:25,427 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105bf4a90>)
2024-12-13 02:43:25,427 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x105bf4a90>) completed
2024-12-13 02:43:25,427 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105285340>, 'SELECT hash, content, g_time FROM card WHERE 1=1 ORDER BY g_time DESC', [])
2024-12-13 02:43:25,427 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x105285340>, 'SELECT hash, content, g_time FROM card WHERE 1=1 ORDER BY g_time DESC', []) completed
2024-12-13 02:43:25,427 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x105285340>)
2024-12-13 02:43:25,427 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x105285340>) completed
2024-12-13 02:43:25,427 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x105285340>)
2024-12-13 02:43:25,427 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x105285340>) completed
2024-12-13 02:43:25,427 - test_mcard_api_persistent - DEBUG - Verifying database contents in ./data/ROOT_mcard_DOT_ENV.db
2024-12-13 02:43:25,428 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x105be4180>
2024-12-13 02:43:25,428 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x105be4180> completed
2024-12-13 02:43:25,428 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x105bf67a0>, 'SELECT hash, content FROM card', [])
2024-12-13 02:43:25,428 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x105bf67a0>, 'SELECT hash, content FROM card', []) completed
2024-12-13 02:43:25,428 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10546a540>)
2024-12-13 02:43:25,428 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10546a540>) completed
2024-12-13 02:43:25,428 - test_mcard_api_persistent - DEBUG - 
Database Contents:
2024-12-13 02:43:25,428 - test_mcard_api_persistent - DEBUG - Hash: 15a3c683d02eefdb2726a0328821944d, Content: Persistent Test Card 1 - 2024-12-13T02:43:25.422214
2024-12-13 02:43:25,428 - test_mcard_api_persistent - DEBUG - Hash: 24ab40ea15e3771e0835e2a6fd86af05, Content: Persistent Test Card 2 - 2024-12-13T02:43:25.422218
2024-12-13 02:43:25,428 - test_mcard_api_persistent - DEBUG - Hash: d8de4955eb22c0cf7135d585877ce99f, Content: Persistent Test Card 3 - 2024-12-13T02:43:25.422220
2024-12-13 02:43:25,428 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10546a540>)
2024-12-13 02:43:25,428 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10546a540>) completed
2024-12-13 02:43:25,428 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x105bf67a0>)
2024-12-13 02:43:25,428 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x105bf67a0>) completed
2024-12-13 02:43:25,429 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:44:57,396 - mcard.application.card_provisioning_app - DEBUG - Logging system initialized.
2024-12-13 02:44:57,396 - mcard.application.card_provisioning_app - DEBUG - Logging system initialized.
2024-12-13 02:44:57,599 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:44:57,599 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:44:57,652 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:45:21,672 - mcard.application.card_provisioning_app - DEBUG - Logging system initialized.
2024-12-13 02:45:21,672 - mcard.application.card_provisioning_app - DEBUG - Logging system initialized.
2024-12-13 02:45:21,876 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:45:21,876 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:45:21,903 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:45:45,675 - mcard.application.card_provisioning_app - DEBUG - Logging system initialized.
2024-12-13 02:45:45,675 - mcard.application.card_provisioning_app - DEBUG - Logging system initialized.
2024-12-13 02:45:45,906 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:45:45,906 - asyncio - DEBUG - Using selector: KqueueSelector
2024-12-13 02:45:45,907 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Initializing SQLite database at ./data/ROOT_mcard_DOT_ENV.db
2024-12-13 02:45:45,907 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x109fe0720>
2024-12-13 02:45:45,909 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x109fe0720> completed
2024-12-13 02:45:45,909 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x10a104040>, 'PRAGMA journal_mode=WAL', [])
2024-12-13 02:45:45,910 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x10a104040>, 'PRAGMA journal_mode=WAL', []) completed
2024-12-13 02:45:45,910 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x10a104040>, 'PRAGMA synchronous=NORMAL', [])
2024-12-13 02:45:45,910 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x10a104040>, 'PRAGMA synchronous=NORMAL', []) completed
2024-12-13 02:45:45,910 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x10a104040>, 'PRAGMA foreign_keys=ON', [])
2024-12-13 02:45:45,910 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x10a104040>, 'PRAGMA foreign_keys=ON', []) completed
2024-12-13 02:45:45,910 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x10a104040>, 'PRAGMA busy_timeout=30.0', [])
2024-12-13 02:45:45,910 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x10a104040>, 'PRAGMA busy_timeout=30.0', []) completed
2024-12-13 02:45:45,910 - mcard.infrastructure.persistence.schema - DEBUG - Starting SQLite schema initialization for tables: ['card']
2024-12-13 02:45:45,910 - mcard.infrastructure.persistence.schema - DEBUG - Processing table: card
2024-12-13 02:45:45,910 - mcard.infrastructure.persistence.schema - DEBUG - Table creation SQL: CREATE TABLE IF NOT EXISTS card (
id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
hash TEXT NOT NULL UNIQUE,
content TEXT NOT NULL,
g_time TEXT NOT NULL,
metadata TEXT
)
2024-12-13 02:45:45,910 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x10a104040>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', [])
2024-12-13 02:45:45,910 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x10a104040>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', []) completed
2024-12-13 02:45:45,910 - mcard.infrastructure.persistence.schema - INFO - Initialized table card in SQLite database
2024-12-13 02:45:45,910 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)
2024-12-13 02:45:45,910 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x10a104040>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', [])
2024-12-13 02:45:45,911 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x10a104040>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', []) completed
2024-12-13 02:45:45,911 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_g_time
2024-12-13 02:45:45,911 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)
2024-12-13 02:45:45,911 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x10a104040>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', [])
2024-12-13 02:45:45,911 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x10a104040>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', []) completed
2024-12-13 02:45:45,911 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_hash
2024-12-13 02:45:45,911 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10a104040>)
2024-12-13 02:45:45,911 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10a104040>) completed
2024-12-13 02:45:45,911 - mcard.infrastructure.persistence.schema - INFO - SQLite schema initialization completed successfully
2024-12-13 02:45:45,911 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10a104040>)
2024-12-13 02:45:45,911 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10a104040>) completed
2024-12-13 02:45:45,911 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x109fe1a80>
2024-12-13 02:45:45,911 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x109fe1a80> completed
2024-12-13 02:45:45,911 - mcard.infrastructure.persistence.schema - DEBUG - Starting SQLite schema initialization for tables: ['card']
2024-12-13 02:45:45,911 - mcard.infrastructure.persistence.schema - DEBUG - Processing table: card
2024-12-13 02:45:45,911 - mcard.infrastructure.persistence.schema - DEBUG - Table creation SQL: CREATE TABLE IF NOT EXISTS card (
id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
hash TEXT NOT NULL UNIQUE,
content TEXT NOT NULL,
g_time TEXT NOT NULL,
metadata TEXT
)
2024-12-13 02:45:45,911 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x10a1049a0>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', [])
2024-12-13 02:45:45,911 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x10a1049a0>, 'CREATE TABLE IF NOT EXISTS card (\nid INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\nhash TEXT NOT NULL UNIQUE,\ncontent TEXT NOT NULL,\ng_time TEXT NOT NULL,\nmetadata TEXT\n)', []) completed
2024-12-13 02:45:45,912 - mcard.infrastructure.persistence.schema - INFO - Initialized table card in SQLite database
2024-12-13 02:45:45,912 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)
2024-12-13 02:45:45,912 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x10a1049a0>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', [])
2024-12-13 02:45:45,912 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x10a1049a0>, 'CREATE INDEX IF NOT EXISTS idx_card_g_time ON card (g_time)', []) completed
2024-12-13 02:45:45,912 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_g_time
2024-12-13 02:45:45,912 - mcard.infrastructure.persistence.schema - DEBUG - Index SQL: CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)
2024-12-13 02:45:45,912 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x10a1049a0>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', [])
2024-12-13 02:45:45,912 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x10a1049a0>, 'CREATE INDEX IF NOT EXISTS idx_card_hash ON card (hash)', []) completed
2024-12-13 02:45:45,912 - mcard.infrastructure.persistence.schema - DEBUG - Created index idx_card_hash
2024-12-13 02:45:45,912 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10a1049a0>)
2024-12-13 02:45:45,912 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10a1049a0>) completed
2024-12-13 02:45:45,912 - mcard.infrastructure.persistence.schema - INFO - SQLite schema initialization completed successfully
2024-12-13 02:45:45,912 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a1049a0>)
2024-12-13 02:45:45,912 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a1049a0>) completed
2024-12-13 02:45:45,912 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9eac0>, 'DELETE FROM card', [])
2024-12-13 02:45:45,912 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9eac0>, 'DELETE FROM card', []) completed
2024-12-13 02:45:45,912 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10a1049a0>)
2024-12-13 02:45:45,913 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10a1049a0>) completed
2024-12-13 02:45:45,913 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x10a1049a0>)
2024-12-13 02:45:45,913 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x10a1049a0>) completed
2024-12-13 02:45:45,913 - mcard.application.card_provisioning_app - DEBUG - CardProvisioningApp initialized with store and hashing service.
2024-12-13 02:45:45,913 - mcard.application.card_provisioning_app - DEBUG - CardProvisioningApp initialized with store and hashing service.
2024-12-13 02:45:45,913 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a104040>)
2024-12-13 02:45:45,913 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a104040>) completed
2024-12-13 02:45:45,913 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9c6c0>, 'DELETE FROM card', [])
2024-12-13 02:45:45,913 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9c6c0>, 'DELETE FROM card', []) completed
2024-12-13 02:45:45,913 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10a104040>)
2024-12-13 02:45:45,913 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10a104040>) completed
2024-12-13 02:45:45,913 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9c6c0>)
2024-12-13 02:45:45,913 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9c6c0>) completed
2024-12-13 02:45:45,913 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 1 - 2024-12-13T02:45:45.913744
2024-12-13 02:45:45,913 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a104040>)
2024-12-13 02:45:45,913 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a104040>) completed
2024-12-13 02:45:45,913 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9c140>, 'SELECT content, g_time FROM card WHERE hash = ?', ('faac40032e73a201c2dc17c251981dc4',))
2024-12-13 02:45:45,913 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9c140>, 'SELECT content, g_time FROM card WHERE hash = ?', ('faac40032e73a201c2dc17c251981dc4',)) completed
2024-12-13 02:45:45,914 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x109e9c140>)
2024-12-13 02:45:45,914 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x109e9c140>) completed
2024-12-13 02:45:45,914 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9c140>)
2024-12-13 02:45:45,914 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9c140>) completed
2024-12-13 02:45:45,914 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: faac40032e73a201c2dc17c251981dc4 to database
2024-12-13 02:45:45,914 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a104040>)
2024-12-13 02:45:45,914 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a104040>) completed
2024-12-13 02:45:45,914 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9dc40>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('faac40032e73a201c2dc17c251981dc4', 'Persistent Test Card 1 - 2024-12-13T02:45:45.913744', '2024-12-12T18:45:45.914170+00:00'))
2024-12-13 02:45:45,914 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9dc40>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('faac40032e73a201c2dc17c251981dc4', 'Persistent Test Card 1 - 2024-12-13T02:45:45.913744', '2024-12-12T18:45:45.914170+00:00')) completed
2024-12-13 02:45:45,914 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10a104040>)
2024-12-13 02:45:45,914 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10a104040>) completed
2024-12-13 02:45:45,914 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: faac40032e73a201c2dc17c251981dc4 to database
2024-12-13 02:45:45,914 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9dc40>)
2024-12-13 02:45:45,914 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9dc40>) completed
2024-12-13 02:45:45,914 - test_mcard_api_persistent - DEBUG - Created card with hash: faac40032e73a201c2dc17c251981dc4
2024-12-13 02:45:45,914 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 2 - 2024-12-13T02:45:45.913749
2024-12-13 02:45:45,914 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a104040>)
2024-12-13 02:45:45,914 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a104040>) completed
2024-12-13 02:45:45,915 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9dfc0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('e1ceb81d5d4679343ba73b3237f4c2b3',))
2024-12-13 02:45:45,915 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9dfc0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('e1ceb81d5d4679343ba73b3237f4c2b3',)) completed
2024-12-13 02:45:45,915 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x109e9dfc0>)
2024-12-13 02:45:45,915 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x109e9dfc0>) completed
2024-12-13 02:45:45,915 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9dfc0>)
2024-12-13 02:45:45,915 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9dfc0>) completed
2024-12-13 02:45:45,915 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: e1ceb81d5d4679343ba73b3237f4c2b3 to database
2024-12-13 02:45:45,915 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a104040>)
2024-12-13 02:45:45,915 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a104040>) completed
2024-12-13 02:45:45,915 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9ccc0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('e1ceb81d5d4679343ba73b3237f4c2b3', 'Persistent Test Card 2 - 2024-12-13T02:45:45.913749', '2024-12-12T18:45:45.915292+00:00'))
2024-12-13 02:45:45,915 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9ccc0>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('e1ceb81d5d4679343ba73b3237f4c2b3', 'Persistent Test Card 2 - 2024-12-13T02:45:45.913749', '2024-12-12T18:45:45.915292+00:00')) completed
2024-12-13 02:45:45,915 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10a104040>)
2024-12-13 02:45:45,915 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10a104040>) completed
2024-12-13 02:45:45,915 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: e1ceb81d5d4679343ba73b3237f4c2b3 to database
2024-12-13 02:45:45,915 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9ccc0>)
2024-12-13 02:45:45,915 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9ccc0>) completed
2024-12-13 02:45:45,915 - test_mcard_api_persistent - DEBUG - Created card with hash: e1ceb81d5d4679343ba73b3237f4c2b3
2024-12-13 02:45:45,915 - test_mcard_api_persistent - DEBUG - Attempting to create card with content: Persistent Test Card 3 - 2024-12-13T02:45:45.913750
2024-12-13 02:45:45,915 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a104040>)
2024-12-13 02:45:45,915 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a104040>) completed
2024-12-13 02:45:45,915 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9d7c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('21bc241ca3e33650950853a698bd2dc1',))
2024-12-13 02:45:45,915 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9d7c0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('21bc241ca3e33650950853a698bd2dc1',)) completed
2024-12-13 02:45:45,916 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x109e9d7c0>)
2024-12-13 02:45:45,916 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x109e9d7c0>) completed
2024-12-13 02:45:45,916 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9d7c0>)
2024-12-13 02:45:45,916 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9d7c0>) completed
2024-12-13 02:45:45,916 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Attempting to save card with hash: 21bc241ca3e33650950853a698bd2dc1 to database
2024-12-13 02:45:45,916 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a104040>)
2024-12-13 02:45:45,916 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a104040>) completed
2024-12-13 02:45:45,916 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9d040>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('21bc241ca3e33650950853a698bd2dc1', 'Persistent Test Card 3 - 2024-12-13T02:45:45.913750', '2024-12-12T18:45:45.916149+00:00'))
2024-12-13 02:45:45,916 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9d040>, 'INSERT INTO card (hash, content, g_time) VALUES (?, ?, ?)', ('21bc241ca3e33650950853a698bd2dc1', 'Persistent Test Card 3 - 2024-12-13T02:45:45.913750', '2024-12-12T18:45:45.916149+00:00')) completed
2024-12-13 02:45:45,916 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10a104040>)
2024-12-13 02:45:45,916 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10a104040>) completed
2024-12-13 02:45:45,916 - mcard.infrastructure.persistence.engine.sqlite_engine - DEBUG - Successfully saved card with hash: 21bc241ca3e33650950853a698bd2dc1 to database
2024-12-13 02:45:45,916 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9d040>)
2024-12-13 02:45:45,916 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9d040>) completed
2024-12-13 02:45:45,916 - test_mcard_api_persistent - DEBUG - Created card with hash: 21bc241ca3e33650950853a698bd2dc1
2024-12-13 02:45:45,916 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a104040>)
2024-12-13 02:45:45,916 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a104040>) completed
2024-12-13 02:45:45,916 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9c940>, 'SELECT content, g_time FROM card WHERE hash = ?', ('faac40032e73a201c2dc17c251981dc4',))
2024-12-13 02:45:45,916 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9c940>, 'SELECT content, g_time FROM card WHERE hash = ?', ('faac40032e73a201c2dc17c251981dc4',)) completed
2024-12-13 02:45:45,916 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x109e9c940>)
2024-12-13 02:45:45,916 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x109e9c940>) completed
2024-12-13 02:45:45,916 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9c940>)
2024-12-13 02:45:45,916 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9c940>) completed
2024-12-13 02:45:45,916 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: faac40032e73a201c2dc17c251981dc4
2024-12-13 02:45:45,916 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a104040>)
2024-12-13 02:45:45,916 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a104040>) completed
2024-12-13 02:45:45,916 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9cb40>, 'SELECT content, g_time FROM card WHERE hash = ?', ('e1ceb81d5d4679343ba73b3237f4c2b3',))
2024-12-13 02:45:45,917 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9cb40>, 'SELECT content, g_time FROM card WHERE hash = ?', ('e1ceb81d5d4679343ba73b3237f4c2b3',)) completed
2024-12-13 02:45:45,917 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x109e9cb40>)
2024-12-13 02:45:45,917 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x109e9cb40>) completed
2024-12-13 02:45:45,917 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9cb40>)
2024-12-13 02:45:45,917 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9cb40>) completed
2024-12-13 02:45:45,917 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: e1ceb81d5d4679343ba73b3237f4c2b3
2024-12-13 02:45:45,917 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a104040>)
2024-12-13 02:45:45,917 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a104040>) completed
2024-12-13 02:45:45,917 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9fcc0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('21bc241ca3e33650950853a698bd2dc1',))
2024-12-13 02:45:45,917 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9fcc0>, 'SELECT content, g_time FROM card WHERE hash = ?', ('21bc241ca3e33650950853a698bd2dc1',)) completed
2024-12-13 02:45:45,917 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x109e9fcc0>)
2024-12-13 02:45:45,917 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchone of sqlite3.Cursor object at 0x109e9fcc0>) completed
2024-12-13 02:45:45,917 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9fcc0>)
2024-12-13 02:45:45,917 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9fcc0>) completed
2024-12-13 02:45:45,917 - test_mcard_api_persistent - DEBUG - Retrieved card with hash: 21bc241ca3e33650950853a698bd2dc1
2024-12-13 02:45:45,917 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a104040>)
2024-12-13 02:45:45,917 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a104040>) completed
2024-12-13 02:45:45,917 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9e0c0>, 'SELECT hash, content, g_time FROM card WHERE 1=1 ORDER BY g_time DESC', [])
2024-12-13 02:45:45,917 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9e0c0>, 'SELECT hash, content, g_time FROM card WHERE 1=1 ORDER BY g_time DESC', []) completed
2024-12-13 02:45:45,917 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x109e9e0c0>)
2024-12-13 02:45:45,917 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x109e9e0c0>) completed
2024-12-13 02:45:45,917 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9e0c0>)
2024-12-13 02:45:45,917 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9e0c0>) completed
2024-12-13 02:45:45,917 - test_mcard_api_persistent - DEBUG - Verifying database contents in ./data/ROOT_mcard_DOT_ENV.db
2024-12-13 02:45:45,917 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x109fe3740>
2024-12-13 02:45:45,918 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x109fe3740> completed
2024-12-13 02:45:45,918 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x10a1057b0>, 'SELECT hash, content FROM card', [])
2024-12-13 02:45:45,918 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x10a1057b0>, 'SELECT hash, content FROM card', []) completed
2024-12-13 02:45:45,918 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x109e9c2c0>)
2024-12-13 02:45:45,918 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x109e9c2c0>) completed
2024-12-13 02:45:45,918 - test_mcard_api_persistent - DEBUG - 
Database Contents:
2024-12-13 02:45:45,918 - test_mcard_api_persistent - DEBUG - Hash: faac40032e73a201c2dc17c251981dc4, Content: Persistent Test Card 1 - 2024-12-13T02:45:45.913744
2024-12-13 02:45:45,918 - test_mcard_api_persistent - DEBUG - Hash: e1ceb81d5d4679343ba73b3237f4c2b3, Content: Persistent Test Card 2 - 2024-12-13T02:45:45.913749
2024-12-13 02:45:45,918 - test_mcard_api_persistent - DEBUG - Hash: 21bc241ca3e33650950853a698bd2dc1, Content: Persistent Test Card 3 - 2024-12-13T02:45:45.913750
2024-12-13 02:45:45,918 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9c2c0>)
2024-12-13 02:45:45,918 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9c2c0>) completed
2024-12-13 02:45:45,918 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x10a1057b0>)
2024-12-13 02:45:45,918 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x10a1057b0>) completed
2024-12-13 02:45:45,918 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a104040>)
2024-12-13 02:45:45,918 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10a104040>) completed
2024-12-13 02:45:45,918 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9c5c0>, 'DELETE FROM card', [])
2024-12-13 02:45:45,919 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x109e9c5c0>, 'DELETE FROM card', []) completed
2024-12-13 02:45:45,919 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10a104040>)
2024-12-13 02:45:45,919 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10a104040>) completed
2024-12-13 02:45:45,919 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9c5c0>)
2024-12-13 02:45:45,919 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x109e9c5c0>) completed
2024-12-13 02:45:45,919 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x10a104040>)
2024-12-13 02:45:45,921 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x10a104040>) completed
2024-12-13 02:45:45,921 - mcard.interfaces.api.mcard_api - INFO - API store closed and cleaned up
2024-12-13 02:45:45,922 - asyncio - DEBUG - Using selector: KqueueSelector
